<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:19,&quot;tests&quot;:112,&quot;passes&quot;:112,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2023-09-30T12:42:28.071Z&quot;,&quot;end&quot;:&quot;2023-09-30T12:42:54.850Z&quot;,&quot;duration&quot;:26779,&quot;testsRegistered&quot;:112,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;7c942096-a150-42de-ae31-33998f4426de&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2012,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(5000);\n// Set Up Bootstrap app instance as a separate process (because it isnt a module yet)\n// Rather than using ipc messages, we could pass command line params...\ncreateBootstrapApp();\n// Set up DHT Bootstrap\ncreateDHTBootstrap();\n// wait for it to init\nsetTimeout(() =&gt; {\n  done();\n}, 2000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;119cf48e-522d-4f6f-a3db-774fde4794d3&quot;,&quot;parentUUID&quot;:&quot;7c942096-a150-42de-ae31-33998f4426de&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c39ace85-4721-43f5-9a0b-4f73563f7298&quot;,&quot;parentUUID&quot;:&quot;7c942096-a150-42de-ae31-33998f4426de&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;destroyBootstrapApp();\ndestroyDHTBootstrap();\ntry {\n  fs.unlinkSync(databasePath);\n} catch {\n  console.log(&#x27;No test database to delete&#x27;);\n}\n// It&#x27;s not great but some of the tests can hang...\n// process.exit();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d459d5c8-7b8e-4900-869e-e3c5d8b6c662&quot;,&quot;parentUUID&quot;:&quot;7c942096-a150-42de-ae31-33998f4426de&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;305468f4-7cd2-41a0-836b-eec9d6943b21&quot;,&quot;parentUUID&quot;:&quot;7c942096-a150-42de-ae31-33998f4426de&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9d74caf2-e398-48ef-98e6-ad3b1f0d6062&quot;,&quot;title&quot;:&quot;App Initialisation Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/app.test.js&quot;,&quot;file&quot;:&quot;/tests/app.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should initialise the application without errors&quot;,&quot;fullTitle&quot;:&quot;App Initialisation Tests should initialise the application without errors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1073,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(4000);\nconst options = {\n  port: 9091,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Init Test Node&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nsetTimeout(() =&gt; {\n  testApp.shutdown();\n  done();\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59e1f617-df04-4b31-bb07-f66593fe2521&quot;,&quot;parentUUID&quot;:&quot;9d74caf2-e398-48ef-98e6-ad3b1f0d6062&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should connect to bootstrap node&quot;,&quot;fullTitle&quot;:&quot;App Initialisation Tests should connect to bootstrap node&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3056,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(4000);\nconst options = {\n  port: 9092,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Bootstrap Test Node&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nsetTimeout(() =&gt; {\n  const cache = testApp.client.getCache();\n  expect(cache).to.be.a(&#x27;Map&#x27;);\n  expect(cache.size).to.equal(1);\n  const [value] = [...cache.values()];\n  expect(value).to.be.an(&#x27;object&#x27;);\n  expect(value.lastAddress).to.be.an(&#x27;object&#x27;);\n  expect(value.lastAddress.port).to.equal(9090);\n  testApp.shutdown();\n  done();\n}, 3000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25471add-7ca1-4c42-a4f8-bd94049dc116&quot;,&quot;parentUUID&quot;:&quot;9d74caf2-e398-48ef-98e6-ad3b1f0d6062&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;59e1f617-df04-4b31-bb07-f66593fe2521&quot;,&quot;25471add-7ca1-4c42-a4f8-bd94049dc116&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4129,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9c0749ca-1f77-4cef-a0a3-0260d6c92117&quot;,&quot;title&quot;:&quot;App User Session Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/app.test.js&quot;,&quot;file&quot;:&quot;/tests/app.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new anon user account for headless mode&quot;,&quot;fullTitle&quot;:&quot;App User Session Tests should create a new anon user account for headless mode&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1053,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(3000);\nconst options = {\n  port: 9091,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  name: &#x27;UserNode1&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\n// expect\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.type).to.equal(&#x27;userProfile&#x27;);\nexpect(profile.userObject).to.be.an(&#x27;object&#x27;);\nexpect(profile.userObject.type).to.equal(&#x27;user&#x27;);\nsetTimeout(() =&gt; {\n  testApp.shutdown();\n  done();\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17ecf523-554e-4205-841a-d830d5b64e89&quot;,&quot;parentUUID&quot;:&quot;9c0749ca-1f77-4cef-a0a3-0260d6c92117&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should login an existing user account with the correct password&quot;,&quot;fullTitle&quot;:&quot;App User Session Tests should login an existing user account with the correct password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1107,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(3000);\n// inserting the test user profile into the database\ninsertUserProfile();\n// logging in with the test user profile\nconst options = {\n  port: 9095,\n  interface: &#x27;none&#x27;,\n  dbname: databasePath,\n  user: &#x27;H1CtoVRCKP6c9bSLnGxnviqmiNqPJ2od46jD2it40aQ=&#x27;,\n  secret: &#x27;password&#x27;,\n  name: &#x27;UserNode2&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nsetTimeout(() =&gt; {\n  const profile = testApp.client.getProfile();\n  expect(profile).to.be.an(&#x27;object&#x27;);\n  expect(profile.type).to.equal(&#x27;userProfile&#x27;);\n  expect(profile.key).to.equal(&#x27;H1CtoVRCKP6c9bSLnGxnviqmiNqPJ2od46jD2it40aQ=&#x27;);\n  testApp.shutdown();\n  done();\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;727ae9e2-2534-4cf6-9ced-09515100bfd0&quot;,&quot;parentUUID&quot;:&quot;9c0749ca-1f77-4cef-a0a3-0260d6c92117&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not login an existing user account with the incorrect password&quot;,&quot;fullTitle&quot;:&quot;App User Session Tests should not login an existing user account with the incorrect password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:51,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const options = {\n  port: 9096,\n  interface: &#x27;none&#x27;,\n  dbname: databasePath,\n  user: &#x27;H1CtoVRCKP6c9bSLnGxnviqmiNqPJ2od46jD2it40aQ=&#x27;,\n  secret: &#x27;1234&#x27;,\n  name: &#x27;UserNode3&#x27;,\n};\nconst testApp = new TestApp();\n// This should throw an error, but it doesnt percolate up to here.\n// Something to do with async zalgo...\ntestApp.init(options);\n// expect(() =&gt; testApp.init(options)).to.throw(Error);\n// However, this error is registered for some reason\nexpect(() =&gt; testApp.cache.getProfile()).to.throw(Error);\ntestApp.shutdown();\ndone();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13a1daf4-a81e-4e25-926c-1d365b794351&quot;,&quot;parentUUID&quot;:&quot;9c0749ca-1f77-4cef-a0a3-0260d6c92117&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not login a non-existent user account&quot;,&quot;fullTitle&quot;:&quot;App User Session Tests should not login a non-existent user account&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const options = {\n  port: 9097,\n  interface: &#x27;none&#x27;,\n  dbname: databasePath,\n  user: &#x27;deadbeefdeadbeefdeadbeefdeadbeefdeadbeefdead&#x27;,\n  secret: &#x27;passwordsaregood&#x27;,\n  name: &#x27;UserNode3&#x27;,\n};\nconst testApp = new TestApp();\n// expect an error...\n// expect(() =&gt; testApp.init(options)).to.throw(Error);\ntestApp.init(options);\nexpect(() =&gt; testApp.cache.getProfile()).to.throw(Error);\ntestApp.shutdown();\ndone();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bbdcef0-d4b7-4ccf-998f-3c9de8fdc771&quot;,&quot;parentUUID&quot;:&quot;9c0749ca-1f77-4cef-a0a3-0260d6c92117&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;17ecf523-554e-4205-841a-d830d5b64e89&quot;,&quot;727ae9e2-2534-4cf6-9ced-09515100bfd0&quot;,&quot;13a1daf4-a81e-4e25-926c-1d365b794351&quot;,&quot;9bbdcef0-d4b7-4ccf-998f-3c9de8fdc771&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2212,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fa35482c-4a2e-437a-bd92-6b1d25e145db&quot;,&quot;title&quot;:&quot;Client Put/Pub/New Item Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/app.test.js&quot;,&quot;file&quot;:&quot;/tests/app.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should put a new document into the database&quot;,&quot;fullTitle&quot;:&quot;Client Put/Pub/New Item Tests should put a new document into the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1058,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(2000);\nconst options = {\n  port: 9098,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Put Test Node 1&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nconst { key } = profile;\nconst testDocument = generateRandomDocument();\nconst response = testApp.client.putItem(testDocument);\n// console.log(response);\nexpect(response).to.be.an(&#x27;object&#x27;);\nexpect(response.responseType).to.equal(ResponseTypes.Success);\nexpect(response.responseData).to.be.a(&#x27;string&#x27;);\nexpect(response.responseData).to.equal(`Item ${testDocument.key} inserted into database.`);\ntestApp.shutdown();\nsetTimeout(() =&gt; {\n  testApp.shutdown();\n  done();\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3539958b-38d2-4482-ad64-684da4882eae&quot;,&quot;parentUUID&quot;:&quot;fa35482c-4a2e-437a-bd92-6b1d25e145db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should publish a document to the network&quot;,&quot;fullTitle&quot;:&quot;Client Put/Pub/New Item Tests should publish a document to the network&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:93,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(3000);\nconst options = {\n  port: 9099,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Put Test Node 2&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nconst { key } = profile;\nconst testDocument = generateRandomDocument();\nconst response = await testApp.client.pubItem(testDocument);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(3);\nresponse.forEach((item) =&gt; {\n  expect(item).to.be.an(&#x27;object&#x27;);\n  expect(item.responseType).to.equal(ResponseTypes.Success);\n  expect(item.responseData).to.be.a(&#x27;string&#x27;);\n});\ntestApp.shutdown();\n// setTimeout(() =&gt; {\n//   testApp.shutdown();\n// }, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e79f68ac-f022-4ecb-9b93-d659f7a223ef&quot;,&quot;parentUUID&quot;:&quot;fa35482c-4a2e-437a-bd92-6b1d25e145db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a new document using newPost&quot;,&quot;fullTitle&quot;:&quot;Client Put/Pub/New Item Tests should create a new document using newPost&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:113,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(3000);\nconst options = {\n  port: 9100,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Put Test Node 3&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nexpect(testApp.client.getProfile()).to.be.an(&#x27;object&#x27;);\nconst response = await testApp.client.createNewPost(&#x27;Test Title&#x27;, &#x27;Test Content&#x27;, [&#x27;test&#x27;, &#x27;content&#x27;]);\nsetTimeout(() =&gt; {\n  // expect(response).to.not.be.undefined;\n  expect(response).to.be.an(&#x27;array&#x27;);\n  expect(response.length).to.equal(3);\n  response.forEach((item) =&gt; {\n    expect(item).to.be.an(&#x27;object&#x27;);\n    expect(item.responseType).to.equal(ResponseTypes.Success);\n    expect(item.responseData).to.be.a(&#x27;string&#x27;);\n  });\n  testApp.shutdown();\n  testApp.shutdown();\n  // done();\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c53a28fd-98bd-498d-bfa9-65cd20975b46&quot;,&quot;parentUUID&quot;:&quot;fa35482c-4a2e-437a-bd92-6b1d25e145db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3539958b-38d2-4482-ad64-684da4882eae&quot;,&quot;e79f68ac-f022-4ecb-9b93-d659f7a223ef&quot;,&quot;c53a28fd-98bd-498d-bfa9-65cd20975b46&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1264,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d389fa6d-692b-43aa-a36d-667a958a50fb&quot;,&quot;title&quot;:&quot;Client Get Item Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/app.test.js&quot;,&quot;file&quot;:&quot;/tests/app.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a document from the database&quot;,&quot;fullTitle&quot;:&quot;Client Get Item Tests should get a document from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(3000);\nconst options = {\n  port: 9101,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Test Node 1&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\n// const { key } = profile;\nconst testDocument = generateRandomDocument();\nconst response = await testApp.client.pubItem(testDocument);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(3);\nresponse.forEach((item) =&gt; {\n  expect(item).to.be.an(&#x27;object&#x27;);\n  expect(item.responseType).to.equal(ResponseTypes.Success);\n  expect(item.responseData).to.be.a(&#x27;string&#x27;);\n});\n// get the document from the database\nconst getItemResponse = await testApp.client.getItem(testDocument.key, Types.Document);\nexpect(getItemResponse).to.be.an(&#x27;object&#x27;);\nexpect(getItemResponse.responseType).to.equal(ResponseTypes.Success);\nexpect(getItemResponse.responseData).to.be.an(&#x27;object&#x27;);\nexpect(getItemResponse.responseData).to.deep.equal(testDocument);\ntestApp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6e2bc40-054e-4ac4-a7c0-9be9f67eb1bb&quot;,&quot;parentUUID&quot;:&quot;d389fa6d-692b-43aa-a36d-667a958a50fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a document from the network&quot;,&quot;fullTitle&quot;:&quot;Client Get Item Tests should get a document from the network&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:199,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(5000);\nconst keys = await publishTestItems();\nexpect(keys).to.be.an(&#x27;array&#x27;);\nexpect(keys.length).to.equal(3);\n// console.log(&#x27;keys:&#x27;, keys);\nconst options = {\n  port: 9102,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Test Node 2&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\n// const response = await testApp.client.getItem(keys[0], Types.Document);\n// console.log(&#x27;response1 :&#x27;, response);\nconst promises = keys.map((key) =&gt; testApp.client.getItem(key, Types.Document));\nconst responses = await Promise.all(promises);\nresponses.forEach((response) =&gt; {\n  expect(response).to.be.an(&#x27;object&#x27;);\n  expect(response.responseType).to.equal(ResponseTypes.Success);\n  expect(response.responseData).to.be.an(&#x27;object&#x27;);\n  expect(keys).to.contain(response.responseData.key);\n  keys.splice(keys.indexOf(response.responseData.key), 1);\n});\nexpect(keys.length).to.equal(0);\ntestApp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2a7c58f-fff6-41b9-a4f3-80e2184cd427&quot;,&quot;parentUUID&quot;:&quot;d389fa6d-692b-43aa-a36d-667a958a50fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to get an invalid request&quot;,&quot;fullTitle&quot;:&quot;Client Get Item Tests should fail to get an invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// this.timeout(5000);\nconst keys = await publishTestItems();\nexpect(keys).to.be.an(&#x27;array&#x27;);\nexpect(keys.length).to.equal(3);\n// console.log(&#x27;keys:&#x27;, keys);\nconst options = {\n  port: 9103,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Test Node 3&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\n// Invalid Key\nlet response = await testApp.client.getItem(&#x27;Invalid Key&#x27;, Types.Document);\nexpect(response).to.be.an(&#x27;object&#x27;);\nexpect(response.responseType).to.equal(ResponseTypes.Error);\nexpect(response.responseData).to.equal(&#x27;Invalid key format.&#x27;);\n// Invalid Type\nresponse = await testApp.client.getItem(&#x27;WY5WipcOJZAc8GBNnSgg4sf9Ps4rHkaGZ2IT/gV9V/4=&#x27;, &#x27;Invalid Type&#x27;);\nexpect(response).to.be.an(&#x27;object&#x27;);\nexpect(response.responseType).to.equal(ResponseTypes.Error);\nexpect(response.responseData).to.equal(&#x27;Invalid item type.&#x27;);\n// Missing Key\nresponse = await testApp.client.getItem(null, Types.Document);\nexpect(response).to.be.an(&#x27;object&#x27;);\nexpect(response.responseType).to.equal(ResponseTypes.Error);\nexpect(response.responseData).to.equal(&#x27;Invalid request, missing parameters.&#x27;);\n// Missing Type\nresponse = await testApp.client.getItem(&#x27;WY5WipcOJZAc8GBNnSgg4sf9Ps4rHkaGZ2IT/gV9V/4=&#x27;);\nexpect(response).to.be.an(&#x27;object&#x27;);\nexpect(response.responseType).to.equal(ResponseTypes.Error);\nexpect(response.responseData).to.equal(&#x27;Invalid request, missing parameters.&#x27;);\ntestApp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ff42e99-b2c1-416c-bf59-7e78f9717e17&quot;,&quot;parentUUID&quot;:&quot;d389fa6d-692b-43aa-a36d-667a958a50fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to get a document not on the network&quot;,&quot;fullTitle&quot;:&quot;Client Get Item Tests should fail to get a document not on the network&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:525,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(5000);\nconst options = {\n  port: 9104,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Test Node 4&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nconst document = generateRandomDocument();\nconst response = await testApp.client.getItem(document.key, Types.Document);\nexpect(response).to.be.an(&#x27;object&#x27;);\nexpect(response.responseType).to.equal(ResponseTypes.Error);\nexpect(response.responseData).to.equal(&#x27;Item not found in database, cache or DHT.&#x27;);\ntestApp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acbce39c-acba-4042-a219-b3e5c9f6cc77&quot;,&quot;parentUUID&quot;:&quot;d389fa6d-692b-43aa-a36d-667a958a50fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e6e2bc40-054e-4ac4-a7c0-9be9f67eb1bb&quot;,&quot;f2a7c58f-fff6-41b9-a4f3-80e2184cd427&quot;,&quot;9ff42e99-b2c1-416c-bf59-7e78f9717e17&quot;,&quot;acbce39c-acba-4042-a219-b3e5c9f6cc77&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:998,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f351df90-63aa-4401-9aba-5239a8dfc3e3&quot;,&quot;title&quot;:&quot;Client Follow/Unfollow Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/app.test.js&quot;,&quot;file&quot;:&quot;/tests/app.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Client Follow/Unfollow Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests \&quot;before all\&quot; hook in \&quot;Client Follow/Unfollow Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:51,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const options = {\n  port: 9105,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Follow Test Node 1&#x27;,\n};\ntestApp = new TestApp();\ntestApp.init(options);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a99f9ee-ee1e-44ac-ba29-8b1c4c4ea8ed&quot;,&quot;parentUUID&quot;:&quot;f351df90-63aa-4401-9aba-5239a8dfc3e3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Client Follow/Unfollow Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests \&quot;after all\&quot; hook in \&quot;Client Follow/Unfollow Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;testApp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5650f063-aa9b-4a85-9c10-a100fabd9b96&quot;,&quot;parentUUID&quot;:&quot;f351df90-63aa-4401-9aba-5239a8dfc3e3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should allow following a user&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should allow following a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(0);\nconst newUser = generateRandomUser();\nconst { key } = newUser;\nconst response = testApp.client.followUser(key);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f292b9c0-8d24-497f-a755-c29059a77cab&quot;,&quot;parentUUID&quot;:&quot;f351df90-63aa-4401-9aba-5239a8dfc3e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow unfollowing a user&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should allow unfollowing a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);\nconst key = profile.following[0];\nconst response = testApp.client.unfollowUser(key);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(0);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;599cffc3-442b-4935-9440-7db554949c21&quot;,&quot;parentUUID&quot;:&quot;f351df90-63aa-4401-9aba-5239a8dfc3e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow following a user twice&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should not allow following a user twice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(0);\nconst newUser = generateRandomUser();\nconst { key } = newUser;\nlet response = testApp.client.followUser(key);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);\nresponse = testApp.client.followUser(key);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3989ead0-35f3-41ea-a3bb-0ff2f0685b9f&quot;,&quot;parentUUID&quot;:&quot;f351df90-63aa-4401-9aba-5239a8dfc3e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow following an invalid user key&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should not allow following an invalid user key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);\nconst key = &#x27;Invalid Key&#x27;;\nconst response = testApp.client.followUser(key);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8aff1be-74bb-4b7b-ae2d-1b4d97737180&quot;,&quot;parentUUID&quot;:&quot;f351df90-63aa-4401-9aba-5239a8dfc3e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow unfollowing an invalid user key&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should not allow unfollowing an invalid user key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);\nconst key = &#x27;Invalid Key&#x27;;\nconst response = testApp.client.unfollowUser(key);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;693d217d-eebb-4921-87fd-2ed212bd55b3&quot;,&quot;parentUUID&quot;:&quot;f351df90-63aa-4401-9aba-5239a8dfc3e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not error unfollowing a valid but non-followed user&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should not error unfollowing a valid but non-followed user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);\nconst newUser = generateRandomUser();\nconst { key } = newUser;\nconst response = testApp.client.unfollowUser(key);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de0077b2-8799-4b3e-b87a-351bed22d54e&quot;,&quot;parentUUID&quot;:&quot;f351df90-63aa-4401-9aba-5239a8dfc3e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow following a null user key&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should not allow following a null user key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);\nconst response = testApp.client.followUser(null);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c7be4eca-dad4-48a4-9f9e-4be9974c2854&quot;,&quot;parentUUID&quot;:&quot;f351df90-63aa-4401-9aba-5239a8dfc3e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow unfollowing a null user key&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should not allow unfollowing a null user key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);\nconst response = testApp.client.unfollowUser(null);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c85f0fe-5c10-4d88-800a-439688f7b315&quot;,&quot;parentUUID&quot;:&quot;f351df90-63aa-4401-9aba-5239a8dfc3e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f292b9c0-8d24-497f-a755-c29059a77cab&quot;,&quot;599cffc3-442b-4935-9440-7db554949c21&quot;,&quot;3989ead0-35f3-41ea-a3bb-0ff2f0685b9f&quot;,&quot;b8aff1be-74bb-4b7b-ae2d-1b4d97737180&quot;,&quot;693d217d-eebb-4921-87fd-2ed212bd55b3&quot;,&quot;de0077b2-8799-4b3e-b87a-351bed22d54e&quot;,&quot;c7be4eca-dad4-48a4-9f9e-4be9974c2854&quot;,&quot;7c85f0fe-5c10-4d88-800a-439688f7b315&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;26ae2843-0f08-4d22-a2f7-1625dafc8eac&quot;,&quot;title&quot;:&quot;Client Get Followed Items Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/app.test.js&quot;,&quot;file&quot;:&quot;/tests/app.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Client Get Followed Items Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Client Get Followed Items Tests \&quot;before all\&quot; hook in \&quot;Client Get Followed Items Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1040,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(5000);\n// create a new user profile\nconst options = [];\n// A user which saves documents to the database only\noptions.push({\n  port: 9101,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;tests/data/app_test_database.db&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Followed Items Test Node 1&#x27;,\n  noDHT: true, // not yet implemented\n});\n// A user which sends to cache only\noptions.push({\n  port: 9102,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Followed Items Test Node 2&#x27;,\n  noDHT: true, // not yet implemented\n});\n// A user which only sends to dht\noptions.push({\n  port: 9103,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  name: &#x27;Get Followed Items Test Node 3&#x27;,\n});\nlet app = new TestApp();\napp.init(options[0]);\napp.client.createNewPost(&#x27;Post One&#x27;, &#x27;Content One&#x27;, [&#x27;test&#x27;, &#x27;content&#x27;]);\nawait app.client.createNewPost(&#x27;Post Two&#x27;, &#x27;Content Two&#x27;, [&#x27;test&#x27;, &#x27;content&#x27;]);\nkeys.push(app.client.getProfile().userObject.key);\napp.shutdown();\napp = new TestApp();\napp.init(options[1]);\nawait app.client.createNewPost(&#x27;Post Three&#x27;, &#x27;Content Three&#x27;, [&#x27;test&#x27;, &#x27;content&#x27;]);\nawait app.client.createNewPost(&#x27;Post Four&#x27;, &#x27;Content Four&#x27;, [&#x27;test&#x27;, &#x27;content&#x27;]);\nkeys.push(app.client.getProfile().userObject.key);\napp.shutdown();\napp = new TestApp();\napp.init(options[2]);\nawait app.client.createNewPost(&#x27;Post Five&#x27;, &#x27;Content Five&#x27;, [&#x27;test&#x27;, &#x27;content&#x27;]);\nawait app.client.createNewPost(&#x27;Post Six&#x27;, &#x27;Content Six&#x27;, [&#x27;test&#x27;, &#x27;content&#x27;]);\nkeys.push(app.client.getProfile().userObject.key);\napp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed28e903-9c06-44b5-bdae-345f4d5a8b1a&quot;,&quot;parentUUID&quot;:&quot;26ae2843-0f08-4d22-a2f7-1625dafc8eac&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Client Get Followed Items Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Client Get Followed Items Tests \&quot;after all\&quot; hook in \&quot;Client Get Followed Items Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;145bbd11-8ffe-42d7-9468-fdcd84e9fb65&quot;,&quot;parentUUID&quot;:&quot;26ae2843-0f08-4d22-a2f7-1625dafc8eac&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get followed items from the database&quot;,&quot;fullTitle&quot;:&quot;Client Get Followed Items Tests should get followed items from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1077,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(5000);\nconst followOptions = {\n  port: 9104,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;./tests/data/app_test_database.db&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Followed Items Test Node 4&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(followOptions);\nkeys.forEach((key) =&gt; {\n  testApp.client.followUser(key);\n});\n// console.log(&#x27;testApp:&#x27;, testApp);\nconst profile = await testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(3);\nconst response = await testApp.client.getFollowedDocuments();\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(6);\nresponse.forEach((item) =&gt; {\n  expect(item).to.be.an(&#x27;object&#x27;);\n  expect(item.type).to.equal(Types.Document);\n});\ntestApp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d229f18-7bf0-4f3a-a318-d04035ddd6fa&quot;,&quot;parentUUID&quot;:&quot;26ae2843-0f08-4d22-a2f7-1625dafc8eac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get followed items from the cache&quot;,&quot;fullTitle&quot;:&quot;Client Get Followed Items Tests should get followed items from the cache&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1068,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(4000);\nconst followOptions = {\n  port: 9105,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Followed Items Test Node 5&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(followOptions);\nkeys.forEach((key) =&gt; {\n  testApp.client.followUser(key);\n});\nconst response = await testApp.client.getFollowedDocuments();\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(6);\nsetTimeout(() =&gt; {\n  testApp.shutdown();\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28db40a0-d8a6-44f1-8748-f2763608cda6&quot;,&quot;parentUUID&quot;:&quot;26ae2843-0f08-4d22-a2f7-1625dafc8eac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get followed items from the dht&quot;,&quot;fullTitle&quot;:&quot;Client Get Followed Items Tests should get followed items from the dht&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1012,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(5000);\nconst followOptions = {\n  port: 9106,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  name: &#x27;Get Followed Items Test Node 6&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(followOptions);\nkeys.forEach((key) =&gt; {\n  testApp.client.followUser(key);\n});\nconst response = await testApp.client.getFollowedDocuments();\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(6);\ntestApp.shutdown();\nsetTimeout(() =&gt; {\n  testApp.shutdown();\n}, 2000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26cf410b-fa42-4d6a-b551-70a86acc2ed9&quot;,&quot;parentUUID&quot;:&quot;26ae2843-0f08-4d22-a2f7-1625dafc8eac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a slice of followed items&quot;,&quot;fullTitle&quot;:&quot;Client Get Followed Items Tests should get a slice of followed items&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1067,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(7000);\nconst followOptions = {\n  port: 9107,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  name: &#x27;Get Followed Items Test Node 7&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(followOptions);\nkeys.forEach((key) =&gt; {\n  testApp.client.followUser(key);\n});\nconst response = await testApp.client.getSomeFollowedDocuments(5, 2);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nsetTimeout(() =&gt; {\n  testApp.shutdown();\n}, 2000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18bcb11c-c114-4f21-985b-b9a0c442413f&quot;,&quot;parentUUID&quot;:&quot;26ae2843-0f08-4d22-a2f7-1625dafc8eac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a slice of followed items without errors&quot;,&quot;fullTitle&quot;:&quot;Client Get Followed Items Tests should get a slice of followed items without errors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:941,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(7000);\nconst followOptions = {\n  port: 9108,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  name: &#x27;Get Followed Items Test Node 8&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(followOptions);\nkeys.forEach((key) =&gt; {\n  testApp.client.followUser(key);\n});\nconst response = await testApp.client.getSomeFollowedDocuments(6, 2);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(0);\ntestApp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a127433a-1007-4b7f-8514-5427ff83670d&quot;,&quot;parentUUID&quot;:&quot;26ae2843-0f08-4d22-a2f7-1625dafc8eac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1d229f18-7bf0-4f3a-a318-d04035ddd6fa&quot;,&quot;28db40a0-d8a6-44f1-8748-f2763608cda6&quot;,&quot;26cf410b-fa42-4d6a-b551-70a86acc2ed9&quot;,&quot;18bcb11c-c114-4f21-985b-b9a0c442413f&quot;,&quot;a127433a-1007-4b7f-8514-5427ff83670d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5165,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;589c8fae-d03e-4a2d-b6ce-1ef06a6ca547&quot;,&quot;title&quot;:&quot;Login Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/auth.test.js&quot;,&quot;file&quot;:&quot;/tests/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should login and create a new user&quot;,&quot;fullTitle&quot;:&quot;Login Tests should login and create a new user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:58,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { userProfile, secretKey } = auth.authNewUser(&#x27;testUser&#x27;, &#x27;testPassword&#x27;);\n// console.log(&#x27;userProfile: &#x27;, userProfile);\n// console.log(&#x27;secretKey: &#x27;, secretKey);\nexpect(userProfile).to.be.an(&#x27;object&#x27;);\nconst { errorProf } = userProfileSchema.validate(userProfile);\nexpect(errorProf).to.be.undefined;\nconst user = userProfile.userObject;\n// console.log(&#x27;user: &#x27;, user);\nconst { errorUser } = userSchema.validate(user);\nexpect(errorUser).to.be.undefined;\nexpect(userProfile.key.length).to.equal(44);\nexpect(userProfile.secretKey.length).to.not.be.undefined;\nexpect(secretKey).to.be.a(&#x27;string&#x27;);\nexpect(secretKey).to.match(longKeyRegex);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1681514-562b-4620-8560-2bfd646b35fa&quot;,&quot;parentUUID&quot;:&quot;589c8fae-d03e-4a2d-b6ce-1ef06a6ca547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should login an existing user&quot;,&quot;fullTitle&quot;:&quot;Login Tests should login an existing user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// todo&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6182aff-c920-4980-83d8-f7ee66cf959d&quot;,&quot;parentUUID&quot;:&quot;589c8fae-d03e-4a2d-b6ce-1ef06a6ca547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b1681514-562b-4620-8560-2bfd646b35fa&quot;,&quot;d6182aff-c920-4980-83d8-f7ee66cf959d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:58,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;71134028-2eaa-40d5-ab67-c89147d684f0&quot;,&quot;title&quot;:&quot;User Session Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/auth.test.js&quot;,&quot;file&quot;:&quot;/tests/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set the userSession key and profile on new user login&quot;,&quot;fullTitle&quot;:&quot;User Session Tests should set the userSession key and profile on new user login&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:49,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { userProfile, secretKey } = auth.authNewUser(&#x27;testUser&#x27;, &#x27;testPassword&#x27;);\nconst sessionUserKey = auth.getUserSessionKey();\nexpect(sessionUserKey).to.not.be.undefined;\nexpect(sessionUserKey).to.be.a(&#x27;string&#x27;);\nexpect(sessionUserKey).to.match(keyRegex);\nexpect(sessionUserKey).to.equal(userProfile.key);\nconst sessionUserProfile = auth.getUserSessionProfile();\nexpect(sessionUserProfile).to.not.be.undefined;\nexpect(sessionUserProfile).to.be.an(&#x27;object&#x27;);\nexpect(sessionUserProfile).to.deep.equal(userProfile);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39354ac9-184c-4da4-a701-8b00640f10cc&quot;,&quot;parentUUID&quot;:&quot;71134028-2eaa-40d5-ab67-c89147d684f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39354ac9-184c-4da4-a701-8b00640f10cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:49,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dcce4a8b-a268-4e1d-b54b-f7baa1ca1d58&quot;,&quot;title&quot;:&quot;Sign/Verify Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/auth.test.js&quot;,&quot;file&quot;:&quot;/tests/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should sign a string message&quot;,&quot;fullTitle&quot;:&quot;Sign/Verify Tests should sign a string message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:53,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { userProfile, secretKey } = auth.authNewUser(&#x27;testUser&#x27;, &#x27;testPassword&#x27;);\nconst message = &#x27;test message&#x27;;\nconst signature = auth.signStringWithKey(message, secretKey);\nexpect(signature).to.not.be.undefined;\nexpect(signature).to.be.a(&#x27;string&#x27;);\nexpect(signature.length).to.equal(88);\nexpect(signature).to.match(longKeyRegex);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ea23a75-3077-47d1-a3d0-ad22be70aa31&quot;,&quot;parentUUID&quot;:&quot;dcce4a8b-a268-4e1d-b54b-f7baa1ca1d58&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should verify a signed message&quot;,&quot;fullTitle&quot;:&quot;Sign/Verify Tests should verify a signed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:62,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { userProfile, secretKey } = auth.authNewUser(&#x27;testUser&#x27;, &#x27;testPassword&#x27;);\nconst message = &#x27;test message&#x27;;\nconst signature = auth.signStringWithKey(message, secretKey);\nconst verified = auth.verifyStringSignature(message, signature, userProfile.key);\nexpect(verified).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3bf33189-916b-415d-8507-bc5e406423fa&quot;,&quot;parentUUID&quot;:&quot;dcce4a8b-a268-4e1d-b54b-f7baa1ca1d58&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not verify a signed message with the wrong key&quot;,&quot;fullTitle&quot;:&quot;Sign/Verify Tests should not verify a signed message with the wrong key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// todo&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2644dab3-bfc0-4c1b-947b-31ce2aa0d1ca&quot;,&quot;parentUUID&quot;:&quot;dcce4a8b-a268-4e1d-b54b-f7baa1ca1d58&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not verify a signed message with the wrong message&quot;,&quot;fullTitle&quot;:&quot;Sign/Verify Tests should not verify a signed message with the wrong message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// todo&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f25db2c-8e04-4483-abba-47245d74f285&quot;,&quot;parentUUID&quot;:&quot;dcce4a8b-a268-4e1d-b54b-f7baa1ca1d58&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should sign a document string&quot;,&quot;fullTitle&quot;:&quot;Sign/Verify Tests should sign a document string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:53,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { userProfile, secretKey } = auth.authNewUser(&#x27;testUser&#x27;, &#x27;testPassword&#x27;);\nconst testDocument = generateRandomDocument();\n// console.log(testDocument);\n// unpack the item and stringify\nconst { signature: sig, ...itemContent } = testDocument;\nconst itemString = JSON.stringify(itemContent);\n// console.log(&#x27;itemString&#x27;, itemString, &#x27;sig&#x27;, sig);\nconst signature = auth.signStringWithKey(itemString, secretKey);\n// console.log(&#x27;Document sig:&#x27;, signature);\nexpect(signature).to.not.be.undefined;\nexpect(signature).to.be.a(&#x27;string&#x27;);\nexpect(signature.length).to.equal(88);\nexpect(signature).to.match(longKeyRegex);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c62feaad-a68f-4abb-bee3-084f26c7f2ab&quot;,&quot;parentUUID&quot;:&quot;dcce4a8b-a268-4e1d-b54b-f7baa1ca1d58&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should stringify and sign a document object&quot;,&quot;fullTitle&quot;:&quot;Sign/Verify Tests should stringify and sign a document object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { userProfile, secretKey } = auth.authNewUser(&#x27;testUser&#x27;, &#x27;testPassword&#x27;);\nconst testDocument = generateRandomDocument();\n// console.log(testDocument);\n// unpack the item and stringify\nconst signature = auth.signItem(testDocument, secretKey);\n// console.log(&#x27;Document Sig:&#x27;, signature);\nexpect(signature).to.not.be.undefined;\nexpect(signature).to.be.a(&#x27;string&#x27;);\nexpect(signature.length).to.equal(88);\nexpect(signature).to.match(longKeyRegex);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71b0f6c1-040c-4dac-bdb2-fc76f07b462b&quot;,&quot;parentUUID&quot;:&quot;dcce4a8b-a268-4e1d-b54b-f7baa1ca1d58&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7ea23a75-3077-47d1-a3d0-ad22be70aa31&quot;,&quot;3bf33189-916b-415d-8507-bc5e406423fa&quot;,&quot;2644dab3-bfc0-4c1b-947b-31ce2aa0d1ca&quot;,&quot;6f25db2c-8e04-4483-abba-47245d74f285&quot;,&quot;c62feaad-a68f-4abb-bee3-084f26c7f2ab&quot;,&quot;71b0f6c1-040c-4dac-bdb2-fc76f07b462b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:220,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c87d6ed1-a794-4665-ada1-cc49181934d3&quot;,&quot;title&quot;:&quot;Client Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/client.test.js&quot;,&quot;file&quot;:&quot;/tests/client.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new client instance&quot;,&quot;fullTitle&quot;:&quot;Client Tests should create a new client instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TODO&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;826748d3-2225-444a-be93-b4b9d80dbbe0&quot;,&quot;parentUUID&quot;:&quot;c87d6ed1-a794-4665-ada1-cc49181934d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;826748d3-2225-444a-be93-b4b9d80dbbe0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;title&quot;:&quot;Database Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/database.test.js&quot;,&quot;file&quot;:&quot;/tests/database.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Database Tests \&quot;before all\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Code to run before all tests in this test suite&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f667c74-7d2a-41ae-8a76-2ff92ffbbe79&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Database Tests \&quot;before each\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Create an empty test database in memory before each test\ntestDB = new Database(&#x27;./tests/data/test_database.db&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2154f044-b424-440c-a29d-7aa360cb5216&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Database Tests \&quot;after all\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Code to run after all tests in this test suite&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0e3fea2-d1ce-40d2-b74c-bb3351e1b494&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Database Tests \&quot;after each\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Close the database connection after each test\nif (testDB) {\n  testDB.closeDatabaseConnection();\n}\n// Delete the test database file, if it exists\nif (fs.existsSync(&#x27;./tests/data/test_database.db&#x27;)) {\n  fs.unlinkSync(&#x27;./tests/data/test_database.db&#x27;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1aed1d3-8bd0-4296-9774-f39c5825ec0d&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should create a new database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// testDB = new Database();\nexpect(testDB).to.be.an.instanceof(Database);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fab2dedf-b072-40a0-9fe2-cec332995d3b&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should open database if path given and exists&quot;,&quot;fullTitle&quot;:&quot;Database Tests should open database if path given and exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// testDB = new Database(&#x27;./tests/data/test_database.db&#x27;);\nexpect(testDB).to.be.an.instanceof(Database);\nexpect(testDB.databaseHasTables()).to.be.equal(true);\nconst testDocument = generateRandomDocument();\ntestDB.put(testDocument);\ntestDB.closeDatabaseConnection();\ntestDB = new Database(&#x27;./tests/data/test_database.db&#x27;);\nconst retrievedDocument = testDB.get(testDocument.key, Types.Document);\nexpect(retrievedDocument).to.exist;\nexpect(retrievedDocument).to.deep.equal(testDocument);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b76dc1b-30cf-4024-b5f4-dc07c6dd2b3c&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create tables if none exist&quot;,&quot;fullTitle&quot;:&quot;Database Tests should create tables if none exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(testDB).to.be.an.instanceof(Database);\nexpect(testDB.databaseHasTables()).to.be.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62d54b97-65f9-46d7-81cf-b336bbba4c19&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create database in memory if requested&quot;,&quot;fullTitle&quot;:&quot;Database Tests should create database in memory if requested&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const memoryDB = new Database(&#x27;:memory:&#x27;);\nexpect(testDB).to.be.an.instanceof(Database);\nexpect(testDB.databaseHasTables()).to.be.equal(true);\nmemoryDB.closeDatabaseConnection();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8113245f-bb09-49b2-9aad-0f00a5eec55d&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a document into the database without errors&quot;,&quot;fullTitle&quot;:&quot;Database Tests should insert a document into the database without errors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDocument = generateRandomDocument();\nconst result = testDB.put(testDocument);\n// If the result is null, then the insert failed\nexpect(result).to.exist; // Ensure that result is not null\n// If the result is not an error, then the insert succeeded\nexpect(result).to.not.be.an(&#x27;error&#x27;); // Ensure that result is not an error\nexpect(result.key).to.equal(testDocument.key); // Ensure that our document was inserted&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fcd3e4c-6630-47f0-a6db-2a7e8fd36b3b&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert multiple documents into the database without errors&quot;,&quot;fullTitle&quot;:&quot;Database Tests should insert multiple documents into the database without errors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDocuments = [];\nfor (let i = 0; i &lt; 30; i += 1) {\n  testDocuments.push(generateRandomDocument());\n}\ntestDocuments.forEach((document) =&gt; {\n  const result = testDB.put(document);\n  expect(result).to.exist;\n  expect(result.key).to.equal(document.key);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93e0c11f-053a-4a7d-adae-50e8cd40cd27&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to insert a document into the database if invalid type given&quot;,&quot;fullTitle&quot;:&quot;Database Tests should fail to insert a document into the database if invalid type given&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDocument = generateRandomDocument();\ntestDocument.type = &#x27;invalid_type&#x27;;\nexpect(() =&gt; testDB.put(testDocument)).to.throw(&#x27;Invalid item type.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c1b9844-07c9-47b8-8c12-e0fb0b938321&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to insert a document into the database if invalid key given&quot;,&quot;fullTitle&quot;:&quot;Database Tests should fail to insert a document into the database if invalid key given&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDocument = generateRandomDocument();\ntestDocument.key = &#x27;1234&#x27;;\nexpect(() =&gt; testDB.put(testDocument)).to.throw(&#x27;Key is not a valid hash for the item.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3795e66-6ddd-45fd-9171-512abbb2f471&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to insert a document into the database if duplicate key given (item already exists)&quot;,&quot;fullTitle&quot;:&quot;Database Tests should fail to insert a document into the database if duplicate key given (item already exists)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDocument = generateRandomDocument();\nconst result = testDB.put(testDocument);\nexpect(result).to.exist;\nexpect(result.key).to.equal(testDocument.key);\nexpect(() =&gt; testDB.put(testDocument)).to.throw(&#x27;Key already exists in database.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cff6c1c2-a9c7-4d14-a61b-ba279d2d3d15&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should retrieve a document from the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should retrieve a document from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDocument = generateRandomDocument();\ntestDB.put(testDocument);\nconst retrievedDocument = testDB.get(testDocument.key, Types.Document);\nexpect(retrievedDocument).to.deep.equal(testDocument);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1594b6a-69d5-4d1c-ae49-f7ca7fd2cf0f&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw exception if bad key is given&quot;,&quot;fullTitle&quot;:&quot;Database Tests should throw exception if bad key is given&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const nonExistentKey = &#x27;non_existent_key&#x27;;\nexpect(() =&gt; testDB.get(nonExistentKey, Types.Document)).to.throw(&#x27;Invalid key format.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a63a96cf-2ca2-4532-bb93-1e720fc088fa&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a valid user into the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should insert a valid user into the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\n// const key = testUser.key;\nconst result = testDB.put(testUser);\n// If the result is null, then the insert failed\nexpect(result).to.exist; // Ensure that result is not null\n// If the result matches the item given then success\nexpect(result.key).to.equal(testUser.key); // Ensure that our document was inserted\nexpect(result).to.deep.equal(testUser);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b18afdc8-c70e-4847-bedb-009d97e92775&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a valid user from the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should get a valid user from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\n// const key = testUser.publicKey;\ntestDB.put(testUser);\n// Test get function with user type\nconst retrievedUser = testDB.get(testUser.key, Types.User);\nexpect(retrievedUser).to.exist;\nexpect(retrievedUser).to.deep.equal(testUser);\n// Test the getUser helper wrapper\nconst retrievedUser2 = testDB.getUser(testUser.key);\nexpect(retrievedUser2).to.exist;\nexpect(retrievedUser2).to.deep.equal(testUser);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c8c69ab-f943-4a4a-a410-121983bfc3e9&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not insert a user into the database with wrong type&quot;,&quot;fullTitle&quot;:&quot;Database Tests should not insert a user into the database with wrong type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\ntestUser.type = &#x27;invalid&#x27;;\n// Should throw an Invalid item type error\nexpect(() =&gt; testDB.put(testUser)).to.throw(&#x27;Invalid item type.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cb68c88-619d-4214-bea2-dc0b4f4124ac&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not insert a user into the database with invalid key&quot;,&quot;fullTitle&quot;:&quot;Database Tests should not insert a user into the database with invalid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\ntestUser.key = &#x27;1234&#x27;;\n// Should throw an Invalid key format error\nexpect(() =&gt; testDB.put(testUser)).to.throw(&#x27;Key is not a valid hash for the item.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a005ff2c-2722-4655-923b-9a304c5e7c91&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert multiple users into the database without errors&quot;,&quot;fullTitle&quot;:&quot;Database Tests should insert multiple users into the database without errors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:105,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const keys = insertTestUsers(testDB);\nkeys.forEach((key) =&gt; {\n  const retrievedUser = testDB.getUser(key);\n  expect(retrievedUser).to.exist;\n  expect(retrievedUser.key).to.equal(key);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0827adb2-4cbe-42ea-b839-7372fcaf2038&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get all users from the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should get all users from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:130,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const keys = insertTestUsers(testDB);\nconst users = testDB.getAllUsers();\nexpect(users).to.exist;\nexpect(users).to.be.an(&#x27;array&#x27;);\nexpect(users.length).to.equal(30);\nusers.forEach((user) =&gt; {\n  expect(keys.includes(user.key)).to.equal(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24bca670-f724-46d3-a040-2094d22c37cf&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a user in the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should update a user in the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\ntestDB.put(testUser);\nconst updatedUser = { ...testUser }; // generateRandomUser();\n// updatedUser.key = testUser.key;\nupdatedUser.lastSeen = new Date().toISOString();\nconst result = testDB.updateUser(updatedUser);\nexpect(result).to.exist;\nexpect(result).to.deep.equal(updatedUser);\nconst retrievedUser = testDB.getUser(testUser.key);\nexpect(retrievedUser).to.exist;\nexpect(retrievedUser).to.deep.equal(updatedUser);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c9c4181-5595-4215-be80-276314dc2ac3&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a user in the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should update a user in the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\ntestUser.lastSeen = &#x27;2023-08-25T19:04:18.259Z&#x27;;\ntestDB.put(testUser);\nconst updatedUser = { ...testUser };\nupdatedUser.lastSeen = &#x27;2022-08-25T10:04:18.259Z&#x27;;\nconst result = testDB.updateUser(updatedUser);\nexpect(result).to.exist;\nexpect(result).to.deep.equal(testUser); // Why?\nconst retrievedUser = testDB.getUser(testUser.key);\nexpect(retrievedUser).to.exist;\nexpect(retrievedUser).to.deep.equal(testUser);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c8736cd-e418-4d09-9072-3da7f9df6ebe&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete a user from the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should delete a user from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\ntestDB.put(testUser);\nconst result = testDB.deleteUser(testUser.key);\nexpect(result).to.exist;\nexpect(result).to.deep.equal(testUser);\nconst retrievedUser = testDB.getUser(testUser.key);\nexpect(retrievedUser).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bfc978fc-5a40-416e-a49f-aa8ec29de967&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw an error when trying to delete non-existent user&quot;,&quot;fullTitle&quot;:&quot;Database Tests should throw an error when trying to delete non-existent user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\nexpect(() =&gt; testDB.deleteUser(testUser.key)).to.throw(&#x27;Item not found in database.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1bef1501-fcdb-42db-b204-164831fcc413&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a valid feed into the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should insert a valid feed into the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TODO&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f631975-9af8-4b37-a2d4-44f0316deb83&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a valid feed from the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should get a valid feed from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TODO&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5ef31d5-def5-4500-959e-2667cc370fe2&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a valid user profile into the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should insert a valid user profile into the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TODO&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73ed1435-4b8a-424f-8710-06b3a0ee8d57&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a valid user profile from the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should get a valid user profile from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TODO&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42abe44f-dcb5-4612-99c9-20b782e7a21d&quot;,&quot;parentUUID&quot;:&quot;8dd08333-21b4-497b-b3b4-9a3dfd705da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fab2dedf-b072-40a0-9fe2-cec332995d3b&quot;,&quot;8b76dc1b-30cf-4024-b5f4-dc07c6dd2b3c&quot;,&quot;62d54b97-65f9-46d7-81cf-b336bbba4c19&quot;,&quot;8113245f-bb09-49b2-9aad-0f00a5eec55d&quot;,&quot;2fcd3e4c-6630-47f0-a6db-2a7e8fd36b3b&quot;,&quot;93e0c11f-053a-4a7d-adae-50e8cd40cd27&quot;,&quot;6c1b9844-07c9-47b8-8c12-e0fb0b938321&quot;,&quot;a3795e66-6ddd-45fd-9171-512abbb2f471&quot;,&quot;cff6c1c2-a9c7-4d14-a61b-ba279d2d3d15&quot;,&quot;a1594b6a-69d5-4d1c-ae49-f7ca7fd2cf0f&quot;,&quot;a63a96cf-2ca2-4532-bb93-1e720fc088fa&quot;,&quot;b18afdc8-c70e-4847-bedb-009d97e92775&quot;,&quot;4c8c69ab-f943-4a4a-a410-121983bfc3e9&quot;,&quot;0cb68c88-619d-4214-bea2-dc0b4f4124ac&quot;,&quot;a005ff2c-2722-4655-923b-9a304c5e7c91&quot;,&quot;0827adb2-4cbe-42ea-b839-7372fcaf2038&quot;,&quot;24bca670-f724-46d3-a040-2094d22c37cf&quot;,&quot;0c9c4181-5595-4215-be80-276314dc2ac3&quot;,&quot;4c8736cd-e418-4d09-9072-3da7f9df6ebe&quot;,&quot;bfc978fc-5a40-416e-a49f-aa8ec29de967&quot;,&quot;1bef1501-fcdb-42db-b204-164831fcc413&quot;,&quot;2f631975-9af8-4b37-a2d4-44f0316deb83&quot;,&quot;a5ef31d5-def5-4500-959e-2667cc370fe2&quot;,&quot;73ed1435-4b8a-424f-8710-06b3a0ee8d57&quot;,&quot;42abe44f-dcb5-4612-99c9-20b782e7a21d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:333,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6b9ac8b9-019a-458b-98f0-419f20575f38&quot;,&quot;title&quot;:&quot;DHT Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/dht.test.js&quot;,&quot;file&quot;:&quot;/tests/dht.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;DHT Tests \&quot;before all\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1508,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(5000);\n// Code to run before all tests in this test suite\n// Check if dht is already running\n// Create a bootstrap node\ncreateDHTBootstrap();\n// Create an empty test database\n// testDB = new Database(&#x27;./tests/data/test_database.db&#x27;);\ntestDB = new Database(&#x27;:memory:&#x27;);\nDHT.setDb(testDB);\nexpect(testDB).to.be.an.instanceof(Database);\nsetTimeout(() =&gt; {\n  // Shut down the dht test node\n  done();\n}, 1500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;799c0e79-af0d-4181-b599-feee89820233&quot;,&quot;parentUUID&quot;:&quot;6b9ac8b9-019a-458b-98f0-419f20575f38&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;DHT Tests \&quot;before each\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a2368ce-b182-4ceb-ae93-7e7c1e92a2a7&quot;,&quot;parentUUID&quot;:&quot;6b9ac8b9-019a-458b-98f0-419f20575f38&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;DHT Tests \&quot;after all\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Destroy the bootstrap node\ndestroyDHTBootstrap();\n// Shut down the dht test node\nDHT.shutdownDHT();\n// Close the database connection\nif (testDB) {\n  testDB.closeDatabaseConnection();\n}\n// Delete the test database file, if it exists\nif (fs.existsSync(&#x27;./tests/data/test_database.db&#x27;)) {\n  fs.unlinkSync(&#x27;./tests/data/test_database.db&#x27;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86118bb9-25e3-41b0-bfdb-c33aef782d9e&quot;,&quot;parentUUID&quot;:&quot;6b9ac8b9-019a-458b-98f0-419f20575f38&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;DHT Tests \&quot;after each\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c7f8084-3896-4e20-903b-0bf52ce2ae63&quot;,&quot;parentUUID&quot;:&quot;6b9ac8b9-019a-458b-98f0-419f20575f38&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set up a dht node&quot;,&quot;fullTitle&quot;:&quot;DHT Tests should set up a dht node&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;node = DHT.initDHTNode();\nexpect(node).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5015860-6c2b-4fb4-9734-91bc5983f94e&quot;,&quot;parentUUID&quot;:&quot;6b9ac8b9-019a-458b-98f0-419f20575f38&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail a query for non exising document&quot;,&quot;fullTitle&quot;:&quot;DHT Tests should fail a query for non exising document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4006,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\nconst doc = generateRandomDocument();\nconst response = await DHT.queryDHT(doc.key, Types.Document);\nexpect(response).to.exist;\nexpect(response.responseType).to.equal(ResponseTypes.Error);\nexpect(response.responseData).to.equal(&#x27;Item not found in DHT.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e2cae40-fbc8-4772-8c04-44c050556c49&quot;,&quot;parentUUID&quot;:&quot;6b9ac8b9-019a-458b-98f0-419f20575f38&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should put a document in the dht&quot;,&quot;fullTitle&quot;:&quot;DHT Tests should put a document in the dht&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\nconst doc = generateRandomDocument();\nconst response = await DHT.storeDHT(doc.key, doc);\nexpect(response).to.exist;\nexpect(response.key).to.equal(doc.key);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4b15fd4-d862-483c-8c9d-718264b25a85&quot;,&quot;parentUUID&quot;:&quot;6b9ac8b9-019a-458b-98f0-419f20575f38&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to put a document in the dht&quot;,&quot;fullTitle&quot;:&quot;DHT Tests should fail to put a document in the dht&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\nconst doc = generateRandomDocument();\ndoc.key = &#x27;invalid key&#x27;;\nconst response = await DHT.storeDHT(doc.key, doc);\nexpect(response).to.exist;\nexpect(response.responseType).to.equal(ResponseTypes.Error);\nexpect(response.responseData).to.equal(&#x27;Invalid key.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be77b9ee-abf9-4f96-a293-acb740828bfd&quot;,&quot;parentUUID&quot;:&quot;6b9ac8b9-019a-458b-98f0-419f20575f38&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query for an existing document&quot;,&quot;fullTitle&quot;:&quot;DHT Tests should query for an existing document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\nconst doc = generateRandomDocument();\nconst put = await DHT.storeDHT(doc.key, doc);\nexpect(put).to.exist;\nexpect(put.key).to.equal(doc.key);\nconst response = await DHT.queryDHT(put.key, put.type);\nexpect(response).to.exist;\nexpect(response.responseType).to.equal(ResponseTypes.Success);\nexpect(response.responseData).to.deep.equal(doc);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8cd88a2-8d23-41da-9d61-c22a12413c19&quot;,&quot;parentUUID&quot;:&quot;6b9ac8b9-019a-458b-98f0-419f20575f38&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should put a lot of documents in the dht&quot;,&quot;fullTitle&quot;:&quot;DHT Tests should put a lot of documents in the dht&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2730,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\nconst amount = 20;\n// generate documents\nconst docs = [];\nfor (let i = 0; i &lt; amount; i += 1) {\n  docs.push(generateRandomDocument());\n}\n// create 100 promises\nconst promises = [];\ndocs.forEach((doc) =&gt; {\n  promises.push(DHT.storeDHT(doc.key, doc));\n});\n// wait for all promises to resolve\nconst responses = await Promise.all(promises);\n// check that all responses are valid\nresponses.forEach((response) =&gt; {\n  expect(response).to.exist;\n  expect(response.key).to.exist;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93b44f2f-aa03-45f4-ac52-1d8c6406c616&quot;,&quot;parentUUID&quot;:&quot;6b9ac8b9-019a-458b-98f0-419f20575f38&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e5015860-6c2b-4fb4-9734-91bc5983f94e&quot;,&quot;2e2cae40-fbc8-4772-8c04-44c050556c49&quot;,&quot;f4b15fd4-d862-483c-8c9d-718264b25a85&quot;,&quot;be77b9ee-abf9-4f96-a293-acb740828bfd&quot;,&quot;e8cd88a2-8d23-41da-9d61-c22a12413c19&quot;,&quot;93b44f2f-aa03-45f4-ac52-1d8c6406c616&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6753,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;05d72c51-84da-4b7e-b15b-f9bf667a9a5e&quot;,&quot;title&quot;:&quot;UI Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/ui.term.test.js&quot;,&quot;file&quot;:&quot;/tests/ui.term.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new Terminal UI instance&quot;,&quot;fullTitle&quot;:&quot;UI Tests should create a new Terminal UI instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TODO&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16b33901-b63b-4101-979c-2c78d851f01c&quot;,&quot;parentUUID&quot;:&quot;05d72c51-84da-4b7e-b15b-f9bf667a9a5e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;16b33901-b63b-4101-979c-2c78d851f01c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1b299f2c-b34f-4ddd-91b0-63307132cb1e&quot;,&quot;title&quot;:&quot;Document Generation Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/utils.test.js&quot;,&quot;file&quot;:&quot;/tests/utils.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should generate a valid document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate a valid document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\nexpect(doc).to.be.an(&#x27;object&#x27;);\nexpect(doc.type).to.equal(&#x27;document&#x27;);\nexpect(doc.key).to.be.a(&#x27;string&#x27;);\nexpect(doc.owner).to.be.a(&#x27;string&#x27;);\nexpect(doc.owner).to.match(keyRegex);\nexpect(doc.timestamp).to.be.a(&#x27;string&#x27;);\nexpect(doc.title).to.be.a(&#x27;string&#x27;);\nexpect(doc.title).to.have.lengthOf.at.least(5);\nexpect(doc.title).to.have.lengthOf.at.most(50);\nexpect(doc.content).to.be.a(&#x27;string&#x27;);\nexpect(doc.content).to.have.lengthOf.at.least(5);\nexpect(doc.content).to.have.lengthOf.at.most(2000);\nexpect(doc.tags).to.be.an(&#x27;array&#x27;);\nexpect(doc.tags).to.have.lengthOf.at.least(0);\nexpect(doc.tags).to.have.lengthOf.at.most(5);\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;578e9564-45b7-4e40-8199-8d0ba0f54956&quot;,&quot;parentUUID&quot;:&quot;1b299f2c-b34f-4ddd-91b0-63307132cb1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a unique document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate a unique document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc1 = generateRandomDocument();\nconst doc2 = generateRandomDocument();\nexpect(doc1).to.not.deep.equal(doc2);\nexpect(doc1.key).to.not.equal(doc2.key);\nexpect(doc1.owner).to.not.equal(doc2.owner);\nexpect(doc1.timestamp).to.not.equal(doc2.timestamp);\nexpect(doc1.title).to.not.equal(doc2.title);\n/* etc */&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a2a5489-194f-4d40-b5fb-2d5002b42347&quot;,&quot;parentUUID&quot;:&quot;1b299f2c-b34f-4ddd-91b0-63307132cb1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a valid hash from document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate a valid hash from document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\n// const key = doc.key;\nexpect(isValidKeyFormat(doc.key)).to.be.true;\nexpect(isValidKeyForItem(doc.key, doc)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d817f758-fdb4-4253-9c75-25d29f6dac89&quot;,&quot;parentUUID&quot;:&quot;1b299f2c-b34f-4ddd-91b0-63307132cb1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate an invalid document hash&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should not validate an invalid document hash&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc1 = generateRandomDocument();\nconst doc2 = generateRandomDocument();\n// const key = doc1.id;\nexpect(isValidKeyForItem(doc1.key, doc1)).to.be.true;\nexpect(isValidKeyForItem(doc1.key, doc2)).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;098ac86e-0b6c-4a39-9112-16319e454cd0&quot;,&quot;parentUUID&quot;:&quot;1b299f2c-b34f-4ddd-91b0-63307132cb1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept the wrong key for document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should not accept the wrong key for document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\nconst key = &#x27;123456789ABCDEF&#x27;;\nexpect(isValidKeyForItem(key, doc)).to.be.false;\nexpect(isValidKeyFormat(key)).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1656ef49-1a98-47da-b95d-89a059ff45bd&quot;,&quot;parentUUID&quot;:&quot;1b299f2c-b34f-4ddd-91b0-63307132cb1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a consistent hash for same document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate a consistent hash for same document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\n// We are hashing a generated doc so the key will not match the id\n// But key1 and key2 should be the same\nconst key1 = generateKey(doc);\nconst key2 = generateKey(doc);\nexpect(key1).to.equal(key2);\nexpect(key1).to.not.equal(key1.id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;845ccc2a-ddc4-4a59-b6ba-d5c3af512d08&quot;,&quot;parentUUID&quot;:&quot;1b299f2c-b34f-4ddd-91b0-63307132cb1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a different hash for different document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate a different hash for different document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc1 = generateRandomDocument();\nconst doc2 = generateRandomDocument();\nconst key1 = generateKey(doc1);\nconst key2 = generateKey(doc2);\nexpect(key1).to.not.equal(key2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;016e25f0-d7bd-4a7c-84eb-d41eb23223e3&quot;,&quot;parentUUID&quot;:&quot;1b299f2c-b34f-4ddd-91b0-63307132cb1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate the same hash for different document with same data&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate the same hash for different document with same data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc1 = generateRandomDocument();\nconst doc2 = { ...doc1 };\nconst key1 = generateKey(doc1);\nconst key2 = generateKey(doc2);\nexpect(key1).to.equal(key2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac6ceb47-8131-4700-9340-9c8e7d5b2319&quot;,&quot;parentUUID&quot;:&quot;1b299f2c-b34f-4ddd-91b0-63307132cb1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate the same hash for same object with different parameter order&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate the same hash for same object with different parameter order&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc1 = {\n  type: &#x27;document&#x27;,\n  id: &#x27;1234567890123456&#x27;,\n  owner: &#x27;1234567890123456&#x27;,\n  timestamp: &#x27;2021-03-01T00:00:00.000Z&#x27;,\n  title: &#x27;Lorem ipsum dolor sit amet&#x27;,\n  content: &#x27;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus. Sed sit amet ipsum mauris.&#x27;,\n  tags: [&#x27;lorem&#x27;, &#x27;ipsum&#x27;, &#x27;dolor&#x27;, &#x27;sit&#x27;, &#x27;amet&#x27;],\n  signature: null,\n};\nconst doc2 = {\n  id: &#x27;1234567890123456&#x27;,\n  type: &#x27;document&#x27;,\n  owner: &#x27;1234567890123456&#x27;,\n  timestamp: &#x27;2021-03-01T00:00:00.000Z&#x27;,\n  content: &#x27;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus. Sed sit amet ipsum mauris.&#x27;,\n  tags: [&#x27;lorem&#x27;, &#x27;ipsum&#x27;, &#x27;dolor&#x27;, &#x27;sit&#x27;, &#x27;amet&#x27;],\n  title: &#x27;Lorem ipsum dolor sit amet&#x27;,\n  signature: null,\n};\nexpect(doc1).to.deep.equal(doc2);\n// Need to test that the order of keys doesn&#x27;t effect the hash function\n// Otherwise it will be inconsistent for the same object\nexpect(JSON.stringify(doc1)).to.not.equal(JSON.stringify(doc2));\nexpect(generateKey(JSON.stringify(doc1))).to.not.equal(JSON.stringify(doc2));\nconst key1 = generateKey(doc1);\nconst key2 = generateKey(doc2);\nexpect(key1).to.equal(key2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90b8ec69-99b2-497f-bb42-73b65c5f6d45&quot;,&quot;parentUUID&quot;:&quot;1b299f2c-b34f-4ddd-91b0-63307132cb1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a valid key for a document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate a valid key for a document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const providedKey = &#x27;MiRm77ENUCNp0bk40w6l+vJfZbtM14fRX/OxPqshzHA=&#x27;;\nconst document = {\n  type: &#x27;document&#x27;,\n  owner: &#x27;KsTEdLZFJn8tGeromEycmr+rhf9Ed0psqCjK9efbpBo=&#x27;,\n  timestamp: &#x27;2023-08-25T12:24:29.154Z&#x27;,\n  title: &#x27;Title2&#x27;,\n  content: &#x27;Post2&#x27;,\n  key: &#x27;MiRm77ENUCNp0bk40w6l+vJfZbtM14fRX/OxPqshzHA=&#x27;,\n  signature: &#x27;pDnGNmkmJg9AV9D2NGvtjD2nLrdX9oiAQFtWhQfRE5BSvfcXq2iGSWb5lVgdTnGR306Z9BHd+jLvDvIvzFVOAg==&#x27;,\n  tags: undefined,\n};\nconst { key, signature, ...content } = document;\n// console.log(key, signature, content);\n// console.log(generateKey(content));\n// content.tags = [];\n// console.log(generateKey(content));\nexpect(key).to.equal(providedKey);\nexpect(generateKey(content)).to.equal(providedKey);\nexpect(isValidKeyFormat(key)).to.be.true;\nexpect(isValidKeyForItem(key, document)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c10eebff-e23e-4b06-ac8e-735a31cea529&quot;,&quot;parentUUID&quot;:&quot;1b299f2c-b34f-4ddd-91b0-63307132cb1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a valid key for a document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate a valid key for a document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const document = {\n  type: &#x27;document&#x27;,\n  owner: generateKey(&#x27;random&#x27;),\n  timestamp: new Date().toISOString(),\n  title: &#x27;Title&#x27;,\n  content: &#x27;Post&#x27;,\n  tags: [],\n  // signature: null,\n};\ndocument.key = generateKey(document);\n// sign the new document\ndocument.signature = &#x27;12345&#x27;;\nconst { key, signature, ...content } = document;\n// console.log(key, signature, content);\nexpect(key).to.equal(generateKey(content));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f642471e-4383-49d4-82a2-4d01e227e88e&quot;,&quot;parentUUID&quot;:&quot;1b299f2c-b34f-4ddd-91b0-63307132cb1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;578e9564-45b7-4e40-8199-8d0ba0f54956&quot;,&quot;2a2a5489-194f-4d40-b5fb-2d5002b42347&quot;,&quot;d817f758-fdb4-4253-9c75-25d29f6dac89&quot;,&quot;098ac86e-0b6c-4a39-9112-16319e454cd0&quot;,&quot;1656ef49-1a98-47da-b95d-89a059ff45bd&quot;,&quot;845ccc2a-ddc4-4a59-b6ba-d5c3af512d08&quot;,&quot;016e25f0-d7bd-4a7c-84eb-d41eb23223e3&quot;,&quot;ac6ceb47-8131-4700-9340-9c8e7d5b2319&quot;,&quot;90b8ec69-99b2-497f-bb42-73b65c5f6d45&quot;,&quot;c10eebff-e23e-4b06-ac8e-735a31cea529&quot;,&quot;f642471e-4383-49d4-82a2-4d01e227e88e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;99d9c580-02c2-4a22-8c35-cfdffcebd775&quot;,&quot;title&quot;:&quot;Feed Generation Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/utils.test.js&quot;,&quot;file&quot;:&quot;/tests/utils.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should generate a random feed with valid parameters&quot;,&quot;fullTitle&quot;:&quot;Feed Generation Tests should generate a random feed with valid parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const feed = generateRandomFeed();\nexpect(feed).to.be.an(&#x27;object&#x27;);\nexpect(feed).to.have.property(&#x27;type&#x27;);\nexpect(feed.type).to.equal(&#x27;feed&#x27;);\nexpect(feed).to.have.property(&#x27;owner&#x27;);\nexpect(feed.owner).to.be.a(&#x27;string&#x27;);\nexpect(feed.owner).to.match(keyRegex);\nexpect(feed).to.have.property(&#x27;timestamp&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e12285d6-3610-471d-8014-e776a01aab54&quot;,&quot;parentUUID&quot;:&quot;99d9c580-02c2-4a22-8c35-cfdffcebd775&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e12285d6-3610-471d-8014-e776a01aab54&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5096d6ac-e32a-472a-854a-330346416e3a&quot;,&quot;title&quot;:&quot;Key Generation / Validation Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/utils.test.js&quot;,&quot;file&quot;:&quot;/tests/utils.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should generate a valid key by hashing an object&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate a valid key by hashing an object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const object = {\n  type: &#x27;document&#x27;,\n  id: &#x27;1234567890123456&#x27;,\n  owner: &#x27;1234567890123456&#x27;,\n};\nconst key = generateKey(object);\nexpect(key).to.equal(&#x27;HOZB/B/8I3/2cWUtyae4nPv1vX7KjCZnOCV7iwrhJlI=&#x27;);\nexpect(key).to.be.a(&#x27;string&#x27;);\nexpect(key).to.have.lengthOf(44);\nexpect(key).to.match(keyRegex);\n// const { error } = keyRegex.validate(key);\n// expect(error).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b68c480-50e7-4c3c-98e3-1cd2218292e3&quot;,&quot;parentUUID&quot;:&quot;5096d6ac-e32a-472a-854a-330346416e3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should validate a valid key format&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should validate a valid key format&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Generate a collection of random valid keys\nconst validKeys = [];\nfor (let i = 0; i &lt; 10; i += 1) {\n  validKeys[i] = generateKey(generateRandomDocument());\n}\nvalidKeys.forEach((key) =&gt; {\n  expect(key).to.be.a(&#x27;string&#x27;);\n  expect(key).to.have.lengthOf(44);\n  expect(key).to.match(keyRegex);\n  expect(isValidKeyFormat(key)).to.be.true;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04aa54e0-4e5c-4286-85cd-b93cc5e2a1da&quot;,&quot;parentUUID&quot;:&quot;5096d6ac-e32a-472a-854a-330346416e3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate an invalid key format&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should not validate an invalid key format&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const invalidKeys = [\n  &#x27;invalid&#x27;,\n  &#x27;12345&#x27;,\n  12345,\n  { key: &#x27;1ud321KDwz6ZFuK9gi0lrr4tIt0TFXR4TR5VCJcukeE=&#x27; },\n  // &#x27;1ud321KDwz6ZFuK9gi0lrr4tIt0TFXR4TR5VCJcuke&#x27;,\n  // &#x27;1ud321KDwz6ZFuK9gi0lrr4tIt0TFXR4TR5VCJcukeeee&#x27;,\n];\ninvalidKeys.forEach((key) =&gt; {\n  expect(isValidKeyFormat(key)).to.be.false;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76ec13d8-682b-4dd7-8917-bd4603763e02&quot;,&quot;parentUUID&quot;:&quot;5096d6ac-e32a-472a-854a-330346416e3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should validate a valid key for an item&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should validate a valid key for an item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df3df647-b4dd-4885-9e83-bab50d0ee897&quot;,&quot;parentUUID&quot;:&quot;5096d6ac-e32a-472a-854a-330346416e3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate an invalid key for an item&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should not validate an invalid key for an item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40d7cde0-4a1e-48d7-8195-ae017fefedf7&quot;,&quot;parentUUID&quot;:&quot;5096d6ac-e32a-472a-854a-330346416e3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a consistent key for the same data&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate a consistent key for the same data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b49b5a3-fd6e-4d07-b8e7-91cc634f392c&quot;,&quot;parentUUID&quot;:&quot;5096d6ac-e32a-472a-854a-330346416e3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a different key for different data&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate a different key for different data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2257044-0562-4657-aa7b-30fc345ae9d6&quot;,&quot;parentUUID&quot;:&quot;5096d6ac-e32a-472a-854a-330346416e3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate the same key for different object with same data&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate the same key for different object with same data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31f269fb-858b-42b7-b308-afea32664bad&quot;,&quot;parentUUID&quot;:&quot;5096d6ac-e32a-472a-854a-330346416e3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate the same key for same object with different parameter order&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate the same key for same object with different parameter order&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a501a8b-a4f0-46ae-8bca-6a81f6f1b838&quot;,&quot;parentUUID&quot;:&quot;5096d6ac-e32a-472a-854a-330346416e3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a valid key for a document&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate a valid key for a document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5b51b2f-e727-4592-8544-5427e208fcd7&quot;,&quot;parentUUID&quot;:&quot;5096d6ac-e32a-472a-854a-330346416e3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a valid key for a user&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate a valid key for a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;116d0b92-9520-419f-8424-d881f257aaee&quot;,&quot;parentUUID&quot;:&quot;5096d6ac-e32a-472a-854a-330346416e3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a valid key for a feed&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate a valid key for a feed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1b12207-4a5a-4662-a51a-0b1454766d47&quot;,&quot;parentUUID&quot;:&quot;5096d6ac-e32a-472a-854a-330346416e3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7b68c480-50e7-4c3c-98e3-1cd2218292e3&quot;,&quot;04aa54e0-4e5c-4286-85cd-b93cc5e2a1da&quot;,&quot;76ec13d8-682b-4dd7-8917-bd4603763e02&quot;,&quot;df3df647-b4dd-4885-9e83-bab50d0ee897&quot;,&quot;40d7cde0-4a1e-48d7-8195-ae017fefedf7&quot;,&quot;2b49b5a3-fd6e-4d07-b8e7-91cc634f392c&quot;,&quot;e2257044-0562-4657-aa7b-30fc345ae9d6&quot;,&quot;31f269fb-858b-42b7-b308-afea32664bad&quot;,&quot;1a501a8b-a4f0-46ae-8bca-6a81f6f1b838&quot;,&quot;a5b51b2f-e727-4592-8544-5427e208fcd7&quot;,&quot;116d0b92-9520-419f-8424-d881f257aaee&quot;,&quot;d1b12207-4a5a-4662-a51a-0b1454766d47&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;40748f5e-5fbf-4aac-916a-c63ba4472a6a&quot;,&quot;title&quot;:&quot;Document Validation Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/validation.document.test.js&quot;,&quot;file&quot;:&quot;/tests/validation.document.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should validate a valid document&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should validate a valid document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;867211a4-9d4d-412a-b319-6d38b5bc524d&quot;,&quot;parentUUID&quot;:&quot;40748f5e-5fbf-4aac-916a-c63ba4472a6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with an invalid type&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with an invalid type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.type = &#x27;invalid&#x27;;\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13ac9936-3677-46fc-94a7-a39b4c842ccc&quot;,&quot;parentUUID&quot;:&quot;40748f5e-5fbf-4aac-916a-c63ba4472a6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with an invalid id&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with an invalid id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.id = &#x27;invalid&#x27;;\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c502e55-b2e3-446d-adc3-0d5b1c015c26&quot;,&quot;parentUUID&quot;:&quot;40748f5e-5fbf-4aac-916a-c63ba4472a6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with an invalid owner&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with an invalid owner&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.owner = &#x27;invalid&#x27;;\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6913dfc1-7a6b-4aed-8d8b-89bcb51f1f30&quot;,&quot;parentUUID&quot;:&quot;40748f5e-5fbf-4aac-916a-c63ba4472a6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with an invalid timestamp&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with an invalid timestamp&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.timestamp = &#x27;invalid&#x27;;\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;806dcc90-873c-40e7-a2e4-7d66a728b72e&quot;,&quot;parentUUID&quot;:&quot;40748f5e-5fbf-4aac-916a-c63ba4472a6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with an invalid title&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with an invalid title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.title = 123;\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2ce9696-412b-4412-af85-ffa6c59f4695&quot;,&quot;parentUUID&quot;:&quot;40748f5e-5fbf-4aac-916a-c63ba4472a6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with an invalid content (int)&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with an invalid content (int)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.content = 123;\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4cf93d08-8a03-48cc-9b54-6ea68516b433&quot;,&quot;parentUUID&quot;:&quot;40748f5e-5fbf-4aac-916a-c63ba4472a6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with invalid tags (int)&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with invalid tags (int)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.tags = 123;\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75a3b145-1f60-4f8d-a2cb-df15f95a4f1d&quot;,&quot;parentUUID&quot;:&quot;40748f5e-5fbf-4aac-916a-c63ba4472a6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with invalid tags (int in array)&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with invalid tags (int in array)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.tags = [123];\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7331df53-56e8-4b0b-8ee9-99859a5dafb7&quot;,&quot;parentUUID&quot;:&quot;40748f5e-5fbf-4aac-916a-c63ba4472a6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with invalid tags (object in array)&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with invalid tags (object in array)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.tags = [{ invalid: true }];\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;558821f8-6008-4abe-b87e-711cf26fc429&quot;,&quot;parentUUID&quot;:&quot;40748f5e-5fbf-4aac-916a-c63ba4472a6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with invalid tags (mixed types)&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with invalid tags (mixed types)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.tags = [&#x27;invalid&#x27;, 123];\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed35f688-d00a-470d-ac47-ff39d89bba90&quot;,&quot;parentUUID&quot;:&quot;40748f5e-5fbf-4aac-916a-c63ba4472a6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;867211a4-9d4d-412a-b319-6d38b5bc524d&quot;,&quot;13ac9936-3677-46fc-94a7-a39b4c842ccc&quot;,&quot;9c502e55-b2e3-446d-adc3-0d5b1c015c26&quot;,&quot;6913dfc1-7a6b-4aed-8d8b-89bcb51f1f30&quot;,&quot;806dcc90-873c-40e7-a2e4-7d66a728b72e&quot;,&quot;e2ce9696-412b-4412-af85-ffa6c59f4695&quot;,&quot;4cf93d08-8a03-48cc-9b54-6ea68516b433&quot;,&quot;75a3b145-1f60-4f8d-a2cb-df15f95a4f1d&quot;,&quot;7331df53-56e8-4b0b-8ee9-99859a5dafb7&quot;,&quot;558821f8-6008-4abe-b87e-711cf26fc429&quot;,&quot;ed35f688-d00a-470d-ac47-ff39d89bba90&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f9f454ff-476b-4555-ad5a-db8a7af93f0a&quot;,&quot;title&quot;:&quot;Feed Validation Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/validation.feed.test.js&quot;,&quot;file&quot;:&quot;/tests/validation.feed.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should validate a valid feed&quot;,&quot;fullTitle&quot;:&quot;Feed Validation Tests should validate a valid feed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const feed = generateRandomFeed(); // Function tested in utils tests\nconst { error } = feedSchema.validate(feed);\nexpect(error).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ffbb18ba-9e4f-40f3-a5f2-458cabb16172&quot;,&quot;parentUUID&quot;:&quot;f9f454ff-476b-4555-ad5a-db8a7af93f0a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ffbb18ba-9e4f-40f3-a5f2-458cabb16172&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d5fe6ee2-bc65-453c-887b-5fe84a2a5f9b&quot;,&quot;title&quot;:&quot;User Validation Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/validation.user.test.js&quot;,&quot;file&quot;:&quot;/tests/validation.user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should validate a valid user with all fields correct&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should validate a valid user with all fields correct&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\nconst { error } = userSchema.validate(user);\nexpect(error).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89cc0e3b-ec53-4517-a727-9e65baac1be3&quot;,&quot;parentUUID&quot;:&quot;d5fe6ee2-bc65-453c-887b-5fe84a2a5f9b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should validate a valid user with \&quot;optional\&quot; fields null&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should validate a valid user with \&quot;optional\&quot; fields null&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\nuser.lastAddress = null;\nuser.lastSeen = null;\nuser.nickname = null;\nconst { error } = userSchema.validate(user);\nexpect(error).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2de43683-14d3-4642-a40c-b63a4f199d46&quot;,&quot;parentUUID&quot;:&quot;d5fe6ee2-bc65-453c-887b-5fe84a2a5f9b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a valid user with empty \&quot;optional\&quot; parameters&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should not validate a valid user with empty \&quot;optional\&quot; parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\nconst invalidUser = {\n  type: user.type,\n  publicKey: user.publicKey,\n  nickname: &#x27;&#x27;,\n  lastSeen: &#x27;&#x27;,\n  lastFeed: &#x27;&#x27;,\n};\nconst { error } = userSchema.validate(invalidUser);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3cb6051b-ec6e-4bbc-b437-ff36591fca0d&quot;,&quot;parentUUID&quot;:&quot;d5fe6ee2-bc65-453c-887b-5fe84a2a5f9b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a valid user with parameters not defined&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should not validate a valid user with parameters not defined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\n// for each key in the user object, delete it and test validation\nObject.keys(user).forEach((key) =&gt; {\n  const invalidUser = { ...user };\n  delete invalidUser[key];\n  const { error } = userSchema.validate(invalidUser);\n  expect(error).to.not.be.undefined;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3002ac8-f01f-45a4-9ecb-60fa3d555cd5&quot;,&quot;parentUUID&quot;:&quot;d5fe6ee2-bc65-453c-887b-5fe84a2a5f9b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a user with an invalid type&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should not validate a user with an invalid type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\nuser.type = &#x27;invalid&#x27;;\nconst { error } = userSchema.validate(user);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e5e7e1c-6e47-432d-b388-c34dced339b7&quot;,&quot;parentUUID&quot;:&quot;d5fe6ee2-bc65-453c-887b-5fe84a2a5f9b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a user with an invalid public key&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should not validate a user with an invalid public key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\nuser.publicKey = &#x27;invalid&#x27;;\nconst { error } = userSchema.validate(user);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63b7f218-1fa5-4418-8598-861207e06be7&quot;,&quot;parentUUID&quot;:&quot;d5fe6ee2-bc65-453c-887b-5fe84a2a5f9b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a user with an invalid public key&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should not validate a user with an invalid public key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\nuser.publicKey = 123;\nconst { error } = userSchema.validate(user);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7fe2e318-9bc6-492e-bc4e-7576dd2b6887&quot;,&quot;parentUUID&quot;:&quot;d5fe6ee2-bc65-453c-887b-5fe84a2a5f9b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a user with an invalid nickname&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should not validate a user with an invalid nickname&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\nuser.nickname = 1;\nconst { error } = userSchema.validate(user);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5db09c1-7eed-4d8e-8402-194466527e91&quot;,&quot;parentUUID&quot;:&quot;d5fe6ee2-bc65-453c-887b-5fe84a2a5f9b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;89cc0e3b-ec53-4517-a727-9e65baac1be3&quot;,&quot;2de43683-14d3-4642-a40c-b63a4f199d46&quot;,&quot;3cb6051b-ec6e-4bbc-b437-ff36591fca0d&quot;,&quot;c3002ac8-f01f-45a4-9ecb-60fa3d555cd5&quot;,&quot;4e5e7e1c-6e47-432d-b388-c34dced339b7&quot;,&quot;63b7f218-1fa5-4418-8598-861207e06be7&quot;,&quot;7fe2e318-9bc6-492e-bc4e-7576dd2b6887&quot;,&quot;e5db09c1-7eed-4d8e-8402-194466527e91&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;psddn&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>