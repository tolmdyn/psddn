<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:19,&quot;tests&quot;:112,&quot;passes&quot;:112,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2023-09-30T13:17:09.101Z&quot;,&quot;end&quot;:&quot;2023-09-30T13:17:34.491Z&quot;,&quot;duration&quot;:25390,&quot;testsRegistered&quot;:112,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;d3fcc28f-b79c-47e5-8988-d37deb1315c1&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2013,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(5000);\n// Set Up Bootstrap app instance as a separate process (because it isnt a module yet)\n// Rather than using ipc messages, we could pass command line params...\ncreateBootstrapApp();\n// Set up DHT Bootstrap\ncreateDHTBootstrap();\n// wait for it to init\nsetTimeout(() =&gt; {\n  done();\n}, 2000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93f15307-ffca-439f-ba09-f68c6b9d6a36&quot;,&quot;parentUUID&quot;:&quot;d3fcc28f-b79c-47e5-8988-d37deb1315c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9e53658-dc69-4af4-b32b-4031b9996a82&quot;,&quot;parentUUID&quot;:&quot;d3fcc28f-b79c-47e5-8988-d37deb1315c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;destroyBootstrapApp();\ndestroyDHTBootstrap();\ntry {\n  fs.unlinkSync(databasePath);\n} catch {\n  console.log(&#x27;No test database to delete&#x27;);\n}\n// It&#x27;s not great but some of the tests can hang...\n// process.exit();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0daf604d-b73d-4ccc-a782-020ae62dac1b&quot;,&quot;parentUUID&quot;:&quot;d3fcc28f-b79c-47e5-8988-d37deb1315c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a5a972f-9035-4523-bd62-bbae6c5bc9ad&quot;,&quot;parentUUID&quot;:&quot;d3fcc28f-b79c-47e5-8988-d37deb1315c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;da7b88ab-e6c2-4ca6-b43b-8006fd3ece18&quot;,&quot;title&quot;:&quot;App Initialisation Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/app.test.js&quot;,&quot;file&quot;:&quot;/tests/app.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should initialise the application without errors&quot;,&quot;fullTitle&quot;:&quot;App Initialisation Tests should initialise the application without errors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1073,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(4000);\nconst options = {\n  port: 9091,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Init Test Node&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nsetTimeout(() =&gt; {\n  testApp.shutdown();\n  done();\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2c104dd-be64-47cf-982e-05480c589c48&quot;,&quot;parentUUID&quot;:&quot;da7b88ab-e6c2-4ca6-b43b-8006fd3ece18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should connect to bootstrap node&quot;,&quot;fullTitle&quot;:&quot;App Initialisation Tests should connect to bootstrap node&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3057,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(4000);\nconst options = {\n  port: 9092,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Bootstrap Test Node&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nsetTimeout(() =&gt; {\n  const cache = testApp.client.getCache();\n  expect(cache).to.be.a(&#x27;Map&#x27;);\n  expect(cache.size).to.equal(1);\n  const [value] = [...cache.values()];\n  expect(value).to.be.an(&#x27;object&#x27;);\n  expect(value.lastAddress).to.be.an(&#x27;object&#x27;);\n  expect(value.lastAddress.port).to.equal(9090);\n  testApp.shutdown();\n  done();\n}, 3000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d38cc487-8fc3-4c18-bd16-65f15ad590e2&quot;,&quot;parentUUID&quot;:&quot;da7b88ab-e6c2-4ca6-b43b-8006fd3ece18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e2c104dd-be64-47cf-982e-05480c589c48&quot;,&quot;d38cc487-8fc3-4c18-bd16-65f15ad590e2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4130,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c477b5b2-7ab6-4f80-b022-eb53ec3f95c8&quot;,&quot;title&quot;:&quot;App User Session Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/app.test.js&quot;,&quot;file&quot;:&quot;/tests/app.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new anon user account for headless mode&quot;,&quot;fullTitle&quot;:&quot;App User Session Tests should create a new anon user account for headless mode&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1054,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(3000);\nconst options = {\n  port: 9091,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  name: &#x27;UserNode1&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\n// expect\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.type).to.equal(&#x27;userProfile&#x27;);\nexpect(profile.userObject).to.be.an(&#x27;object&#x27;);\nexpect(profile.userObject.type).to.equal(&#x27;user&#x27;);\nsetTimeout(() =&gt; {\n  testApp.shutdown();\n  done();\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;163f4dfe-4580-400b-95bd-9ab0133d057e&quot;,&quot;parentUUID&quot;:&quot;c477b5b2-7ab6-4f80-b022-eb53ec3f95c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should login an existing user account with the correct password&quot;,&quot;fullTitle&quot;:&quot;App User Session Tests should login an existing user account with the correct password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1129,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(3000);\n// inserting the test user profile into the database\ninsertUserProfile();\n// logging in with the test user profile\nconst options = {\n  port: 9095,\n  interface: &#x27;none&#x27;,\n  dbname: databasePath,\n  user: &#x27;H1CtoVRCKP6c9bSLnGxnviqmiNqPJ2od46jD2it40aQ=&#x27;,\n  secret: &#x27;password&#x27;,\n  name: &#x27;UserNode2&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nsetTimeout(() =&gt; {\n  const profile = testApp.client.getProfile();\n  expect(profile).to.be.an(&#x27;object&#x27;);\n  expect(profile.type).to.equal(&#x27;userProfile&#x27;);\n  expect(profile.key).to.equal(&#x27;H1CtoVRCKP6c9bSLnGxnviqmiNqPJ2od46jD2it40aQ=&#x27;);\n  testApp.shutdown();\n  done();\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf844b86-129f-47c6-b861-80d9deee9b53&quot;,&quot;parentUUID&quot;:&quot;c477b5b2-7ab6-4f80-b022-eb53ec3f95c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not login an existing user account with the incorrect password&quot;,&quot;fullTitle&quot;:&quot;App User Session Tests should not login an existing user account with the incorrect password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:63,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const options = {\n  port: 9096,\n  interface: &#x27;none&#x27;,\n  dbname: databasePath,\n  user: &#x27;H1CtoVRCKP6c9bSLnGxnviqmiNqPJ2od46jD2it40aQ=&#x27;,\n  secret: &#x27;1234&#x27;,\n  name: &#x27;UserNode3&#x27;,\n};\nconst testApp = new TestApp();\n// This should throw an error, but it doesnt percolate up to here.\n// Something to do with async zalgo...\ntestApp.init(options);\n// expect(() =&gt; testApp.init(options)).to.throw(Error);\n// However, this error is registered for some reason\nexpect(() =&gt; testApp.cache.getProfile()).to.throw(Error);\ntestApp.shutdown();\ndone();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b556e6f3-4e22-4bb3-8d05-a3730be8a0dc&quot;,&quot;parentUUID&quot;:&quot;c477b5b2-7ab6-4f80-b022-eb53ec3f95c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not login a non-existent user account&quot;,&quot;fullTitle&quot;:&quot;App User Session Tests should not login a non-existent user account&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const options = {\n  port: 9097,\n  interface: &#x27;none&#x27;,\n  dbname: databasePath,\n  user: &#x27;deadbeefdeadbeefdeadbeefdeadbeefdeadbeefdead&#x27;,\n  secret: &#x27;passwordsaregood&#x27;,\n  name: &#x27;UserNode3&#x27;,\n};\nconst testApp = new TestApp();\n// expect an error...\n// expect(() =&gt; testApp.init(options)).to.throw(Error);\ntestApp.init(options);\nexpect(() =&gt; testApp.cache.getProfile()).to.throw(Error);\ntestApp.shutdown();\ndone();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a1b9a02-570d-4630-aac2-c0ff810808b7&quot;,&quot;parentUUID&quot;:&quot;c477b5b2-7ab6-4f80-b022-eb53ec3f95c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;163f4dfe-4580-400b-95bd-9ab0133d057e&quot;,&quot;cf844b86-129f-47c6-b861-80d9deee9b53&quot;,&quot;b556e6f3-4e22-4bb3-8d05-a3730be8a0dc&quot;,&quot;3a1b9a02-570d-4630-aac2-c0ff810808b7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2247,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fff74ae8-4a02-40e7-9e3a-1f259386f71c&quot;,&quot;title&quot;:&quot;Client Put/Pub/New Item Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/app.test.js&quot;,&quot;file&quot;:&quot;/tests/app.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should put a new document into the database&quot;,&quot;fullTitle&quot;:&quot;Client Put/Pub/New Item Tests should put a new document into the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1073,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(2000);\nconst options = {\n  port: 9098,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Put Test Node 1&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nconst { key } = profile;\nconst testDocument = generateRandomDocument();\nconst response = testApp.client.putItem(testDocument);\n// console.log(response);\nexpect(response).to.be.an(&#x27;object&#x27;);\nexpect(response.responseType).to.equal(ResponseTypes.Success);\nexpect(response.responseData).to.be.a(&#x27;string&#x27;);\nexpect(response.responseData).to.equal(`Item ${testDocument.key} inserted into database.`);\ntestApp.shutdown();\nsetTimeout(() =&gt; {\n  testApp.shutdown();\n  done();\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9f3f6eb-7f9d-43e1-a210-5a1d9305685e&quot;,&quot;parentUUID&quot;:&quot;fff74ae8-4a02-40e7-9e3a-1f259386f71c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should publish a document to the network&quot;,&quot;fullTitle&quot;:&quot;Client Put/Pub/New Item Tests should publish a document to the network&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(3000);\nconst options = {\n  port: 9099,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Put Test Node 2&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nconst { key } = profile;\nconst testDocument = generateRandomDocument();\nconst response = await testApp.client.pubItem(testDocument);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(3);\nresponse.forEach((item) =&gt; {\n  expect(item).to.be.an(&#x27;object&#x27;);\n  expect(item.responseType).to.equal(ResponseTypes.Success);\n  expect(item.responseData).to.be.a(&#x27;string&#x27;);\n});\ntestApp.shutdown();\n// setTimeout(() =&gt; {\n//   testApp.shutdown();\n// }, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb7a01b0-0f2a-42c8-badf-87932b01dd5d&quot;,&quot;parentUUID&quot;:&quot;fff74ae8-4a02-40e7-9e3a-1f259386f71c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a new document using newPost&quot;,&quot;fullTitle&quot;:&quot;Client Put/Pub/New Item Tests should create a new document using newPost&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:112,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(3000);\nconst options = {\n  port: 9100,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Put Test Node 3&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nexpect(testApp.client.getProfile()).to.be.an(&#x27;object&#x27;);\nconst response = await testApp.client.createNewPost(&#x27;Test Title&#x27;, &#x27;Test Content&#x27;, [&#x27;test&#x27;, &#x27;content&#x27;]);\nsetTimeout(() =&gt; {\n  // expect(response).to.not.be.undefined;\n  expect(response).to.be.an(&#x27;array&#x27;);\n  expect(response.length).to.equal(3);\n  response.forEach((item) =&gt; {\n    expect(item).to.be.an(&#x27;object&#x27;);\n    expect(item.responseType).to.equal(ResponseTypes.Success);\n    expect(item.responseData).to.be.a(&#x27;string&#x27;);\n  });\n  testApp.shutdown();\n  testApp.shutdown();\n  // done();\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2831f3cf-f972-4ae5-9b48-8a0c4ef98134&quot;,&quot;parentUUID&quot;:&quot;fff74ae8-4a02-40e7-9e3a-1f259386f71c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d9f3f6eb-7f9d-43e1-a210-5a1d9305685e&quot;,&quot;cb7a01b0-0f2a-42c8-badf-87932b01dd5d&quot;,&quot;2831f3cf-f972-4ae5-9b48-8a0c4ef98134&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1255,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;639b34e5-4e1b-436a-87dd-50bac8d6deb8&quot;,&quot;title&quot;:&quot;Client Get Item Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/app.test.js&quot;,&quot;file&quot;:&quot;/tests/app.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a document from the database&quot;,&quot;fullTitle&quot;:&quot;Client Get Item Tests should get a document from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:69,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(3000);\nconst options = {\n  port: 9101,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Test Node 1&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\n// const { key } = profile;\nconst testDocument = generateRandomDocument();\nconst response = await testApp.client.pubItem(testDocument);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(3);\nresponse.forEach((item) =&gt; {\n  expect(item).to.be.an(&#x27;object&#x27;);\n  expect(item.responseType).to.equal(ResponseTypes.Success);\n  expect(item.responseData).to.be.a(&#x27;string&#x27;);\n});\n// get the document from the database\nconst getItemResponse = await testApp.client.getItem(testDocument.key, Types.Document);\nexpect(getItemResponse).to.be.an(&#x27;object&#x27;);\nexpect(getItemResponse.responseType).to.equal(ResponseTypes.Success);\nexpect(getItemResponse.responseData).to.be.an(&#x27;object&#x27;);\nexpect(getItemResponse.responseData).to.deep.equal(testDocument);\ntestApp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e8a38c4-d977-412a-92b7-3cf9058c7c70&quot;,&quot;parentUUID&quot;:&quot;639b34e5-4e1b-436a-87dd-50bac8d6deb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a document from the network&quot;,&quot;fullTitle&quot;:&quot;Client Get Item Tests should get a document from the network&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:198,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(5000);\nconst keys = await publishTestItems();\nexpect(keys).to.be.an(&#x27;array&#x27;);\nexpect(keys.length).to.equal(3);\n// console.log(&#x27;keys:&#x27;, keys);\nconst options = {\n  port: 9102,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Test Node 2&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\n// const response = await testApp.client.getItem(keys[0], Types.Document);\n// console.log(&#x27;response1 :&#x27;, response);\nconst promises = keys.map((key) =&gt; testApp.client.getItem(key, Types.Document));\nconst responses = await Promise.all(promises);\nresponses.forEach((response) =&gt; {\n  expect(response).to.be.an(&#x27;object&#x27;);\n  expect(response.responseType).to.equal(ResponseTypes.Success);\n  expect(response.responseData).to.be.an(&#x27;object&#x27;);\n  expect(keys).to.contain(response.responseData.key);\n  keys.splice(keys.indexOf(response.responseData.key), 1);\n});\nexpect(keys.length).to.equal(0);\ntestApp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c90f3f35-74d7-4cb2-83e5-9c220bdcdda3&quot;,&quot;parentUUID&quot;:&quot;639b34e5-4e1b-436a-87dd-50bac8d6deb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to get an invalid request&quot;,&quot;fullTitle&quot;:&quot;Client Get Item Tests should fail to get an invalid request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// this.timeout(5000);\nconst keys = await publishTestItems();\nexpect(keys).to.be.an(&#x27;array&#x27;);\nexpect(keys.length).to.equal(3);\n// console.log(&#x27;keys:&#x27;, keys);\nconst options = {\n  port: 9103,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Test Node 3&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\n// Invalid Key\nlet response = await testApp.client.getItem(&#x27;Invalid Key&#x27;, Types.Document);\nexpect(response).to.be.an(&#x27;object&#x27;);\nexpect(response.responseType).to.equal(ResponseTypes.Error);\nexpect(response.responseData).to.equal(&#x27;Invalid key format.&#x27;);\n// Invalid Type\nresponse = await testApp.client.getItem(&#x27;WY5WipcOJZAc8GBNnSgg4sf9Ps4rHkaGZ2IT/gV9V/4=&#x27;, &#x27;Invalid Type&#x27;);\nexpect(response).to.be.an(&#x27;object&#x27;);\nexpect(response.responseType).to.equal(ResponseTypes.Error);\nexpect(response.responseData).to.equal(&#x27;Invalid item type.&#x27;);\n// Missing Key\nresponse = await testApp.client.getItem(null, Types.Document);\nexpect(response).to.be.an(&#x27;object&#x27;);\nexpect(response.responseType).to.equal(ResponseTypes.Error);\nexpect(response.responseData).to.equal(&#x27;Invalid request, missing parameters.&#x27;);\n// Missing Type\nresponse = await testApp.client.getItem(&#x27;WY5WipcOJZAc8GBNnSgg4sf9Ps4rHkaGZ2IT/gV9V/4=&#x27;);\nexpect(response).to.be.an(&#x27;object&#x27;);\nexpect(response.responseType).to.equal(ResponseTypes.Error);\nexpect(response.responseData).to.equal(&#x27;Invalid request, missing parameters.&#x27;);\ntestApp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e443a3d7-f89c-4bc0-98fa-71179e22a671&quot;,&quot;parentUUID&quot;:&quot;639b34e5-4e1b-436a-87dd-50bac8d6deb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to get a document not on the network&quot;,&quot;fullTitle&quot;:&quot;Client Get Item Tests should fail to get a document not on the network&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:529,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(5000);\nconst options = {\n  port: 9104,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Test Node 4&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(options);\nexpect(testApp).to.be.an(&#x27;object&#x27;);\nconst profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nconst document = generateRandomDocument();\nconst response = await testApp.client.getItem(document.key, Types.Document);\nexpect(response).to.be.an(&#x27;object&#x27;);\nexpect(response.responseType).to.equal(ResponseTypes.Error);\nexpect(response.responseData).to.equal(&#x27;Item not found in database, cache or DHT.&#x27;);\ntestApp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff0ded83-075a-432a-afe0-248c535156a6&quot;,&quot;parentUUID&quot;:&quot;639b34e5-4e1b-436a-87dd-50bac8d6deb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e8a38c4-d977-412a-92b7-3cf9058c7c70&quot;,&quot;c90f3f35-74d7-4cb2-83e5-9c220bdcdda3&quot;,&quot;e443a3d7-f89c-4bc0-98fa-71179e22a671&quot;,&quot;ff0ded83-075a-432a-afe0-248c535156a6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1002,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7b8db2ec-1a47-4f83-9a9a-0cf24e985b37&quot;,&quot;title&quot;:&quot;Client Follow/Unfollow Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/app.test.js&quot;,&quot;file&quot;:&quot;/tests/app.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Client Follow/Unfollow Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests \&quot;before all\&quot; hook in \&quot;Client Follow/Unfollow Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:50,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const options = {\n  port: 9105,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Follow Test Node 1&#x27;,\n};\ntestApp = new TestApp();\ntestApp.init(options);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;835ab6bb-4cfb-4347-b179-53a442549a51&quot;,&quot;parentUUID&quot;:&quot;7b8db2ec-1a47-4f83-9a9a-0cf24e985b37&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Client Follow/Unfollow Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests \&quot;after all\&quot; hook in \&quot;Client Follow/Unfollow Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;testApp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f567d15f-5b0d-45ff-a8c2-ecea6ed64ff0&quot;,&quot;parentUUID&quot;:&quot;7b8db2ec-1a47-4f83-9a9a-0cf24e985b37&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should allow following a user&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should allow following a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(0);\nconst newUser = generateRandomUser();\nconst { key } = newUser;\nconst response = testApp.client.followUser(key);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30715b7f-7961-4f37-af56-4bc5d66d7247&quot;,&quot;parentUUID&quot;:&quot;7b8db2ec-1a47-4f83-9a9a-0cf24e985b37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow unfollowing a user&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should allow unfollowing a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);\nconst key = profile.following[0];\nconst response = testApp.client.unfollowUser(key);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(0);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0759484-a7d7-4f28-8a38-d05c3d47ffd6&quot;,&quot;parentUUID&quot;:&quot;7b8db2ec-1a47-4f83-9a9a-0cf24e985b37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow following a user twice&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should not allow following a user twice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(0);\nconst newUser = generateRandomUser();\nconst { key } = newUser;\nlet response = testApp.client.followUser(key);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);\nresponse = testApp.client.followUser(key);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9477293c-8f60-4b1d-9c79-02354de205cb&quot;,&quot;parentUUID&quot;:&quot;7b8db2ec-1a47-4f83-9a9a-0cf24e985b37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow following an invalid user key&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should not allow following an invalid user key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);\nconst key = &#x27;Invalid Key&#x27;;\nconst response = testApp.client.followUser(key);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d9bdcbc-58ac-4e06-b703-f4a02a5a7891&quot;,&quot;parentUUID&quot;:&quot;7b8db2ec-1a47-4f83-9a9a-0cf24e985b37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow unfollowing an invalid user key&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should not allow unfollowing an invalid user key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);\nconst key = &#x27;Invalid Key&#x27;;\nconst response = testApp.client.unfollowUser(key);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8555a360-6fb3-4dd5-828b-6d67b40cb1ed&quot;,&quot;parentUUID&quot;:&quot;7b8db2ec-1a47-4f83-9a9a-0cf24e985b37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not error unfollowing a valid but non-followed user&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should not error unfollowing a valid but non-followed user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);\nconst newUser = generateRandomUser();\nconst { key } = newUser;\nconst response = testApp.client.unfollowUser(key);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f66a2371-dbe3-4041-8038-e81bd312541d&quot;,&quot;parentUUID&quot;:&quot;7b8db2ec-1a47-4f83-9a9a-0cf24e985b37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow following a null user key&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should not allow following a null user key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);\nconst response = testApp.client.followUser(null);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df703d22-d2b3-4fbd-84ad-33372047a8de&quot;,&quot;parentUUID&quot;:&quot;7b8db2ec-1a47-4f83-9a9a-0cf24e985b37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow unfollowing a null user key&quot;,&quot;fullTitle&quot;:&quot;Client Follow/Unfollow Tests should not allow unfollowing a null user key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let profile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);\nconst response = testApp.client.unfollowUser(null);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nprofile = testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2d78eaf-b30d-4c6d-9752-4f927cd5c9ad&quot;,&quot;parentUUID&quot;:&quot;7b8db2ec-1a47-4f83-9a9a-0cf24e985b37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;30715b7f-7961-4f37-af56-4bc5d66d7247&quot;,&quot;a0759484-a7d7-4f28-8a38-d05c3d47ffd6&quot;,&quot;9477293c-8f60-4b1d-9c79-02354de205cb&quot;,&quot;4d9bdcbc-58ac-4e06-b703-f4a02a5a7891&quot;,&quot;8555a360-6fb3-4dd5-828b-6d67b40cb1ed&quot;,&quot;f66a2371-dbe3-4041-8038-e81bd312541d&quot;,&quot;df703d22-d2b3-4fbd-84ad-33372047a8de&quot;,&quot;c2d78eaf-b30d-4c6d-9752-4f927cd5c9ad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e6f1e804-c4d2-40c6-aa25-723a00492314&quot;,&quot;title&quot;:&quot;Client Get Followed Items Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/app.test.js&quot;,&quot;file&quot;:&quot;/tests/app.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Client Get Followed Items Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Client Get Followed Items Tests \&quot;before all\&quot; hook in \&quot;Client Get Followed Items Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:353,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(5000);\n// create a new user profile\nconst options = [];\n// A user which saves documents to the database only\noptions.push({\n  port: 9101,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;tests/data/app_test_database.db&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Followed Items Test Node 1&#x27;,\n  noDHT: true, // not yet implemented\n});\n// A user which sends to cache only\noptions.push({\n  port: 9102,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Followed Items Test Node 2&#x27;,\n  noDHT: true, // not yet implemented\n});\n// A user which only sends to dht\noptions.push({\n  port: 9103,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  name: &#x27;Get Followed Items Test Node 3&#x27;,\n});\nlet app = new TestApp();\napp.init(options[0]);\napp.client.createNewPost(&#x27;Post One&#x27;, &#x27;Content One&#x27;, [&#x27;test&#x27;, &#x27;content&#x27;]);\nawait app.client.createNewPost(&#x27;Post Two&#x27;, &#x27;Content Two&#x27;, [&#x27;test&#x27;, &#x27;content&#x27;]);\nkeys.push(app.client.getProfile().userObject.key);\napp.shutdown();\napp = new TestApp();\napp.init(options[1]);\nawait app.client.createNewPost(&#x27;Post Three&#x27;, &#x27;Content Three&#x27;, [&#x27;test&#x27;, &#x27;content&#x27;]);\nawait app.client.createNewPost(&#x27;Post Four&#x27;, &#x27;Content Four&#x27;, [&#x27;test&#x27;, &#x27;content&#x27;]);\nkeys.push(app.client.getProfile().userObject.key);\napp.shutdown();\napp = new TestApp();\napp.init(options[2]);\nawait app.client.createNewPost(&#x27;Post Five&#x27;, &#x27;Content Five&#x27;, [&#x27;test&#x27;, &#x27;content&#x27;]);\nawait app.client.createNewPost(&#x27;Post Six&#x27;, &#x27;Content Six&#x27;, [&#x27;test&#x27;, &#x27;content&#x27;]);\nkeys.push(app.client.getProfile().userObject.key);\napp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51db2b21-fa73-48fc-9d16-240cbfe10668&quot;,&quot;parentUUID&quot;:&quot;e6f1e804-c4d2-40c6-aa25-723a00492314&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Client Get Followed Items Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Client Get Followed Items Tests \&quot;after all\&quot; hook in \&quot;Client Get Followed Items Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28e13949-2ae4-4c38-b0ce-c6a27e24d16a&quot;,&quot;parentUUID&quot;:&quot;e6f1e804-c4d2-40c6-aa25-723a00492314&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get followed items from the database&quot;,&quot;fullTitle&quot;:&quot;Client Get Followed Items Tests should get followed items from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1076,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(5000);\nconst followOptions = {\n  port: 9104,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;./tests/data/app_test_database.db&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Followed Items Test Node 4&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(followOptions);\nkeys.forEach((key) =&gt; {\n  testApp.client.followUser(key);\n});\n// console.log(&#x27;testApp:&#x27;, testApp);\nconst profile = await testApp.client.getProfile();\nexpect(profile).to.be.an(&#x27;object&#x27;);\nexpect(profile.following.length).to.equal(3);\nconst response = await testApp.client.getFollowedDocuments();\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(6);\nresponse.forEach((item) =&gt; {\n  expect(item).to.be.an(&#x27;object&#x27;);\n  expect(item.type).to.equal(Types.Document);\n});\ntestApp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39bff254-e7bd-43fc-84a5-767c86587ab2&quot;,&quot;parentUUID&quot;:&quot;e6f1e804-c4d2-40c6-aa25-723a00492314&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get followed items from the cache&quot;,&quot;fullTitle&quot;:&quot;Client Get Followed Items Tests should get followed items from the cache&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1071,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(4000);\nconst followOptions = {\n  port: 9105,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  bootstrap: &#x27;./tests/scripts/bootstrapTesting.json&#x27;,\n  name: &#x27;Get Followed Items Test Node 5&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(followOptions);\nkeys.forEach((key) =&gt; {\n  testApp.client.followUser(key);\n});\nconst response = await testApp.client.getFollowedDocuments();\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(6);\nsetTimeout(() =&gt; {\n  testApp.shutdown();\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09b3ca8c-fc9b-4289-9dea-e009ff69ed32&quot;,&quot;parentUUID&quot;:&quot;e6f1e804-c4d2-40c6-aa25-723a00492314&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get followed items from the dht&quot;,&quot;fullTitle&quot;:&quot;Client Get Followed Items Tests should get followed items from the dht&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1027,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(5000);\nconst followOptions = {\n  port: 9106,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  name: &#x27;Get Followed Items Test Node 6&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(followOptions);\nkeys.forEach((key) =&gt; {\n  testApp.client.followUser(key);\n});\nconst response = await testApp.client.getFollowedDocuments();\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(6);\ntestApp.shutdown();\nsetTimeout(() =&gt; {\n  testApp.shutdown();\n}, 2000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17cdaf2b-b065-45fb-85e7-fe689cbb9cc9&quot;,&quot;parentUUID&quot;:&quot;e6f1e804-c4d2-40c6-aa25-723a00492314&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a slice of followed items&quot;,&quot;fullTitle&quot;:&quot;Client Get Followed Items Tests should get a slice of followed items&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1074,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(7000);\nconst followOptions = {\n  port: 9107,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  name: &#x27;Get Followed Items Test Node 7&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(followOptions);\nkeys.forEach((key) =&gt; {\n  testApp.client.followUser(key);\n});\nconst response = await testApp.client.getSomeFollowedDocuments(5, 2);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(1);\nsetTimeout(() =&gt; {\n  testApp.shutdown();\n}, 2000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3904360d-45b5-43fe-b1da-2f50bac00a54&quot;,&quot;parentUUID&quot;:&quot;e6f1e804-c4d2-40c6-aa25-723a00492314&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a slice of followed items without errors&quot;,&quot;fullTitle&quot;:&quot;Client Get Followed Items Tests should get a slice of followed items without errors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:932,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(7000);\nconst followOptions = {\n  port: 9108,\n  interface: &#x27;none&#x27;,\n  dbname: &#x27;:memory:&#x27;,\n  name: &#x27;Get Followed Items Test Node 8&#x27;,\n};\nconst testApp = new TestApp();\ntestApp.init(followOptions);\nkeys.forEach((key) =&gt; {\n  testApp.client.followUser(key);\n});\nconst response = await testApp.client.getSomeFollowedDocuments(6, 2);\nexpect(response).to.be.an(&#x27;array&#x27;);\nexpect(response.length).to.equal(0);\ntestApp.shutdown();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3c85dd0-9b70-4337-b693-cc807b567d50&quot;,&quot;parentUUID&quot;:&quot;e6f1e804-c4d2-40c6-aa25-723a00492314&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39bff254-e7bd-43fc-84a5-767c86587ab2&quot;,&quot;09b3ca8c-fc9b-4289-9dea-e009ff69ed32&quot;,&quot;17cdaf2b-b065-45fb-85e7-fe689cbb9cc9&quot;,&quot;3904360d-45b5-43fe-b1da-2f50bac00a54&quot;,&quot;a3c85dd0-9b70-4337-b693-cc807b567d50&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5180,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7ad83e05-b6f9-4fc9-849e-0a9b59497c8b&quot;,&quot;title&quot;:&quot;Login Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/auth.test.js&quot;,&quot;file&quot;:&quot;/tests/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should login and create a new user&quot;,&quot;fullTitle&quot;:&quot;Login Tests should login and create a new user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:51,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { userProfile, secretKey } = auth.authNewUser(&#x27;testUser&#x27;, &#x27;testPassword&#x27;);\n// console.log(&#x27;userProfile: &#x27;, userProfile);\n// console.log(&#x27;secretKey: &#x27;, secretKey);\nexpect(userProfile).to.be.an(&#x27;object&#x27;);\nconst { errorProf } = userProfileSchema.validate(userProfile);\nexpect(errorProf).to.be.undefined;\nconst user = userProfile.userObject;\n// console.log(&#x27;user: &#x27;, user);\nconst { errorUser } = userSchema.validate(user);\nexpect(errorUser).to.be.undefined;\nexpect(userProfile.key.length).to.equal(44);\nexpect(userProfile.secretKey.length).to.not.be.undefined;\nexpect(secretKey).to.be.a(&#x27;string&#x27;);\nexpect(secretKey).to.match(longKeyRegex);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b259e2a-7bd7-4ee8-98e1-b26e689b07b7&quot;,&quot;parentUUID&quot;:&quot;7ad83e05-b6f9-4fc9-849e-0a9b59497c8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should login an existing user&quot;,&quot;fullTitle&quot;:&quot;Login Tests should login an existing user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// todo&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48b40d27-6b8c-4bcf-92a3-404e11cd4f29&quot;,&quot;parentUUID&quot;:&quot;7ad83e05-b6f9-4fc9-849e-0a9b59497c8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3b259e2a-7bd7-4ee8-98e1-b26e689b07b7&quot;,&quot;48b40d27-6b8c-4bcf-92a3-404e11cd4f29&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:51,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9939e9a0-80d9-4a8a-9eb3-5d2602586388&quot;,&quot;title&quot;:&quot;User Session Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/auth.test.js&quot;,&quot;file&quot;:&quot;/tests/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set the userSession key and profile on new user login&quot;,&quot;fullTitle&quot;:&quot;User Session Tests should set the userSession key and profile on new user login&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:50,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { userProfile, secretKey } = auth.authNewUser(&#x27;testUser&#x27;, &#x27;testPassword&#x27;);\nconst sessionUserKey = auth.getUserSessionKey();\nexpect(sessionUserKey).to.not.be.undefined;\nexpect(sessionUserKey).to.be.a(&#x27;string&#x27;);\nexpect(sessionUserKey).to.match(keyRegex);\nexpect(sessionUserKey).to.equal(userProfile.key);\nconst sessionUserProfile = auth.getUserSessionProfile();\nexpect(sessionUserProfile).to.not.be.undefined;\nexpect(sessionUserProfile).to.be.an(&#x27;object&#x27;);\nexpect(sessionUserProfile).to.deep.equal(userProfile);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9109c651-d58d-4bf6-bad9-ab33c997a555&quot;,&quot;parentUUID&quot;:&quot;9939e9a0-80d9-4a8a-9eb3-5d2602586388&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9109c651-d58d-4bf6-bad9-ab33c997a555&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:50,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bf7dfa52-401f-44ad-9df4-238fb23b5478&quot;,&quot;title&quot;:&quot;Sign/Verify Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/auth.test.js&quot;,&quot;file&quot;:&quot;/tests/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should sign a string message&quot;,&quot;fullTitle&quot;:&quot;Sign/Verify Tests should sign a string message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:53,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { userProfile, secretKey } = auth.authNewUser(&#x27;testUser&#x27;, &#x27;testPassword&#x27;);\nconst message = &#x27;test message&#x27;;\nconst signature = auth.signStringWithKey(message, secretKey);\nexpect(signature).to.not.be.undefined;\nexpect(signature).to.be.a(&#x27;string&#x27;);\nexpect(signature.length).to.equal(88);\nexpect(signature).to.match(longKeyRegex);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e322d1f-a2d8-4f18-8e63-6b0e5d6b8bde&quot;,&quot;parentUUID&quot;:&quot;bf7dfa52-401f-44ad-9df4-238fb23b5478&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should verify a signed message&quot;,&quot;fullTitle&quot;:&quot;Sign/Verify Tests should verify a signed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { userProfile, secretKey } = auth.authNewUser(&#x27;testUser&#x27;, &#x27;testPassword&#x27;);\nconst message = &#x27;test message&#x27;;\nconst signature = auth.signStringWithKey(message, secretKey);\nconst verified = auth.verifyStringSignature(message, signature, userProfile.key);\nexpect(verified).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b997ff5-c4a7-45ee-9be4-1c838a42ee6a&quot;,&quot;parentUUID&quot;:&quot;bf7dfa52-401f-44ad-9df4-238fb23b5478&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not verify a signed message with the wrong key&quot;,&quot;fullTitle&quot;:&quot;Sign/Verify Tests should not verify a signed message with the wrong key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// todo&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eafceba8-9f70-4711-97a7-03be76647215&quot;,&quot;parentUUID&quot;:&quot;bf7dfa52-401f-44ad-9df4-238fb23b5478&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not verify a signed message with the wrong message&quot;,&quot;fullTitle&quot;:&quot;Sign/Verify Tests should not verify a signed message with the wrong message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// todo&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9feac561-4039-4b76-adea-729af4f14894&quot;,&quot;parentUUID&quot;:&quot;bf7dfa52-401f-44ad-9df4-238fb23b5478&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should sign a document string&quot;,&quot;fullTitle&quot;:&quot;Sign/Verify Tests should sign a document string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:53,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { userProfile, secretKey } = auth.authNewUser(&#x27;testUser&#x27;, &#x27;testPassword&#x27;);\nconst testDocument = generateRandomDocument();\n// console.log(testDocument);\n// unpack the item and stringify\nconst { signature: sig, ...itemContent } = testDocument;\nconst itemString = JSON.stringify(itemContent);\n// console.log(&#x27;itemString&#x27;, itemString, &#x27;sig&#x27;, sig);\nconst signature = auth.signStringWithKey(itemString, secretKey);\n// console.log(&#x27;Document sig:&#x27;, signature);\nexpect(signature).to.not.be.undefined;\nexpect(signature).to.be.a(&#x27;string&#x27;);\nexpect(signature.length).to.equal(88);\nexpect(signature).to.match(longKeyRegex);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4ed9d6b-d2de-4579-af4a-90cf8915183b&quot;,&quot;parentUUID&quot;:&quot;bf7dfa52-401f-44ad-9df4-238fb23b5478&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should stringify and sign a document object&quot;,&quot;fullTitle&quot;:&quot;Sign/Verify Tests should stringify and sign a document object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:53,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { userProfile, secretKey } = auth.authNewUser(&#x27;testUser&#x27;, &#x27;testPassword&#x27;);\nconst testDocument = generateRandomDocument();\n// console.log(testDocument);\n// unpack the item and stringify\nconst signature = auth.signItem(testDocument, secretKey);\n// console.log(&#x27;Document Sig:&#x27;, signature);\nexpect(signature).to.not.be.undefined;\nexpect(signature).to.be.a(&#x27;string&#x27;);\nexpect(signature.length).to.equal(88);\nexpect(signature).to.match(longKeyRegex);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5067fc69-3cf6-457c-9f4a-d0734b6292a7&quot;,&quot;parentUUID&quot;:&quot;bf7dfa52-401f-44ad-9df4-238fb23b5478&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e322d1f-a2d8-4f18-8e63-6b0e5d6b8bde&quot;,&quot;4b997ff5-c4a7-45ee-9be4-1c838a42ee6a&quot;,&quot;eafceba8-9f70-4711-97a7-03be76647215&quot;,&quot;9feac561-4039-4b76-adea-729af4f14894&quot;,&quot;e4ed9d6b-d2de-4579-af4a-90cf8915183b&quot;,&quot;5067fc69-3cf6-457c-9f4a-d0734b6292a7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:220,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0f3d53c8-af19-4bc2-b200-f0ec6840f821&quot;,&quot;title&quot;:&quot;Client Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/client.test.js&quot;,&quot;file&quot;:&quot;/tests/client.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new client instance&quot;,&quot;fullTitle&quot;:&quot;Client Tests should create a new client instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TODO&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d6d3514-60c9-42da-8ee0-140ea5832641&quot;,&quot;parentUUID&quot;:&quot;0f3d53c8-af19-4bc2-b200-f0ec6840f821&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8d6d3514-60c9-42da-8ee0-140ea5832641&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;title&quot;:&quot;Database Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/database.test.js&quot;,&quot;file&quot;:&quot;/tests/database.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Database Tests \&quot;before all\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Code to run before all tests in this test suite&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e04ac42-9176-4f32-b91f-1baea13d4ce2&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Database Tests \&quot;before each\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Create an empty test database in memory before each test\ntestDB = new Database(&#x27;./tests/data/test_database.db&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21bb2161-7bc8-4a88-9e17-60b8ee9972e6&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Database Tests \&quot;after all\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Code to run after all tests in this test suite&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84a93b20-fdad-43dd-8cee-f53500b6de4e&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Database Tests \&quot;after each\&quot; hook in \&quot;Database Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Close the database connection after each test\nif (testDB) {\n  testDB.closeDatabaseConnection();\n}\n// Delete the test database file, if it exists\nif (fs.existsSync(&#x27;./tests/data/test_database.db&#x27;)) {\n  fs.unlinkSync(&#x27;./tests/data/test_database.db&#x27;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;481b19b0-19df-4909-afc6-b13bc8a8299e&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should create a new database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// testDB = new Database();\nexpect(testDB).to.be.an.instanceof(Database);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b34031e5-1a65-406d-adaf-4d463567d693&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should open database if path given and exists&quot;,&quot;fullTitle&quot;:&quot;Database Tests should open database if path given and exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// testDB = new Database(&#x27;./tests/data/test_database.db&#x27;);\nexpect(testDB).to.be.an.instanceof(Database);\nexpect(testDB.databaseHasTables()).to.be.equal(true);\nconst testDocument = generateRandomDocument();\ntestDB.put(testDocument);\ntestDB.closeDatabaseConnection();\ntestDB = new Database(&#x27;./tests/data/test_database.db&#x27;);\nconst retrievedDocument = testDB.get(testDocument.key, Types.Document);\nexpect(retrievedDocument).to.exist;\nexpect(retrievedDocument).to.deep.equal(testDocument);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87d69469-5d88-4203-a692-7d240f09140b&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create tables if none exist&quot;,&quot;fullTitle&quot;:&quot;Database Tests should create tables if none exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(testDB).to.be.an.instanceof(Database);\nexpect(testDB.databaseHasTables()).to.be.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0da74d71-cdd4-4bf3-b5cd-fe0442045f22&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create database in memory if requested&quot;,&quot;fullTitle&quot;:&quot;Database Tests should create database in memory if requested&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const memoryDB = new Database(&#x27;:memory:&#x27;);\nexpect(testDB).to.be.an.instanceof(Database);\nexpect(testDB.databaseHasTables()).to.be.equal(true);\nmemoryDB.closeDatabaseConnection();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08c4a676-d3bd-4591-9a41-ca63d116e203&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a document into the database without errors&quot;,&quot;fullTitle&quot;:&quot;Database Tests should insert a document into the database without errors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDocument = generateRandomDocument();\nconst result = testDB.put(testDocument);\n// If the result is null, then the insert failed\nexpect(result).to.exist; // Ensure that result is not null\n// If the result is not an error, then the insert succeeded\nexpect(result).to.not.be.an(&#x27;error&#x27;); // Ensure that result is not an error\nexpect(result.key).to.equal(testDocument.key); // Ensure that our document was inserted&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4005e6d-12c1-4ef9-aa77-6062eb2ddb55&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert multiple documents into the database without errors&quot;,&quot;fullTitle&quot;:&quot;Database Tests should insert multiple documents into the database without errors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDocuments = [];\nfor (let i = 0; i &lt; 30; i += 1) {\n  testDocuments.push(generateRandomDocument());\n}\ntestDocuments.forEach((document) =&gt; {\n  const result = testDB.put(document);\n  expect(result).to.exist;\n  expect(result.key).to.equal(document.key);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55e4acc5-51b1-4b2b-a820-243b3004424e&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to insert a document into the database if invalid type given&quot;,&quot;fullTitle&quot;:&quot;Database Tests should fail to insert a document into the database if invalid type given&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDocument = generateRandomDocument();\ntestDocument.type = &#x27;invalid_type&#x27;;\nexpect(() =&gt; testDB.put(testDocument)).to.throw(&#x27;Invalid item type.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8e36466-3722-4552-b9a3-1e34b426c14f&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to insert a document into the database if invalid key given&quot;,&quot;fullTitle&quot;:&quot;Database Tests should fail to insert a document into the database if invalid key given&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDocument = generateRandomDocument();\ntestDocument.key = &#x27;1234&#x27;;\nexpect(() =&gt; testDB.put(testDocument)).to.throw(&#x27;Key is not a valid hash for the item.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bcd95aed-6a56-4cdd-86b2-3c17653bff37&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to insert a document into the database if duplicate key given (item already exists)&quot;,&quot;fullTitle&quot;:&quot;Database Tests should fail to insert a document into the database if duplicate key given (item already exists)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDocument = generateRandomDocument();\nconst result = testDB.put(testDocument);\nexpect(result).to.exist;\nexpect(result.key).to.equal(testDocument.key);\nexpect(() =&gt; testDB.put(testDocument)).to.throw(&#x27;Key already exists in database.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e5162d0-cf48-4d0c-a061-23cc974f44c2&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should retrieve a document from the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should retrieve a document from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDocument = generateRandomDocument();\ntestDB.put(testDocument);\nconst retrievedDocument = testDB.get(testDocument.key, Types.Document);\nexpect(retrievedDocument).to.deep.equal(testDocument);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6d1eafd-8137-4441-82d2-3a94c43e7782&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw exception if bad key is given&quot;,&quot;fullTitle&quot;:&quot;Database Tests should throw exception if bad key is given&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const nonExistentKey = &#x27;non_existent_key&#x27;;\nexpect(() =&gt; testDB.get(nonExistentKey, Types.Document)).to.throw(&#x27;Invalid key format.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db9c7e78-0a69-47af-a04d-fb3200bd37bb&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a valid user into the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should insert a valid user into the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\n// const key = testUser.key;\nconst result = testDB.put(testUser);\n// If the result is null, then the insert failed\nexpect(result).to.exist; // Ensure that result is not null\n// If the result matches the item given then success\nexpect(result.key).to.equal(testUser.key); // Ensure that our document was inserted\nexpect(result).to.deep.equal(testUser);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b54b0127-f691-45d7-89b7-0d10e2ea60a1&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a valid user from the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should get a valid user from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\n// const key = testUser.publicKey;\ntestDB.put(testUser);\n// Test get function with user type\nconst retrievedUser = testDB.get(testUser.key, Types.User);\nexpect(retrievedUser).to.exist;\nexpect(retrievedUser).to.deep.equal(testUser);\n// Test the getUser helper wrapper\nconst retrievedUser2 = testDB.getUser(testUser.key);\nexpect(retrievedUser2).to.exist;\nexpect(retrievedUser2).to.deep.equal(testUser);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd4d42a1-af5d-430a-b6fa-cff6f9d1ad50&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not insert a user into the database with wrong type&quot;,&quot;fullTitle&quot;:&quot;Database Tests should not insert a user into the database with wrong type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\ntestUser.type = &#x27;invalid&#x27;;\n// Should throw an Invalid item type error\nexpect(() =&gt; testDB.put(testUser)).to.throw(&#x27;Invalid item type.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2867269-9b56-4454-a5e7-3cbbe95dbe68&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not insert a user into the database with invalid key&quot;,&quot;fullTitle&quot;:&quot;Database Tests should not insert a user into the database with invalid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\ntestUser.key = &#x27;1234&#x27;;\n// Should throw an Invalid key format error\nexpect(() =&gt; testDB.put(testUser)).to.throw(&#x27;Key is not a valid hash for the item.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7617b147-cb6c-474d-a4ca-8778b53f7dd7&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert multiple users into the database without errors&quot;,&quot;fullTitle&quot;:&quot;Database Tests should insert multiple users into the database without errors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:103,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const keys = insertTestUsers(testDB);\nkeys.forEach((key) =&gt; {\n  const retrievedUser = testDB.getUser(key);\n  expect(retrievedUser).to.exist;\n  expect(retrievedUser.key).to.equal(key);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1899ff59-49ec-4844-8039-213f13cc1f3c&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get all users from the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should get all users from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:110,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const keys = insertTestUsers(testDB);\nconst users = testDB.getAllUsers();\nexpect(users).to.exist;\nexpect(users).to.be.an(&#x27;array&#x27;);\nexpect(users.length).to.equal(30);\nusers.forEach((user) =&gt; {\n  expect(keys.includes(user.key)).to.equal(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;144e35b6-486c-4024-bd96-8b48312cd06c&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a user in the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should update a user in the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\ntestDB.put(testUser);\nconst updatedUser = { ...testUser }; // generateRandomUser();\n// updatedUser.key = testUser.key;\nupdatedUser.lastSeen = new Date().toISOString();\nconst result = testDB.updateUser(updatedUser);\nexpect(result).to.exist;\nexpect(result).to.deep.equal(updatedUser);\nconst retrievedUser = testDB.getUser(testUser.key);\nexpect(retrievedUser).to.exist;\nexpect(retrievedUser).to.deep.equal(updatedUser);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;001c1cf8-7676-4bfd-a819-b1405c69d34d&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a user in the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should update a user in the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\ntestUser.lastSeen = &#x27;2023-08-25T19:04:18.259Z&#x27;;\ntestDB.put(testUser);\nconst updatedUser = { ...testUser };\nupdatedUser.lastSeen = &#x27;2022-08-25T10:04:18.259Z&#x27;;\nconst result = testDB.updateUser(updatedUser);\nexpect(result).to.exist;\nexpect(result).to.deep.equal(testUser); // Why?\nconst retrievedUser = testDB.getUser(testUser.key);\nexpect(retrievedUser).to.exist;\nexpect(retrievedUser).to.deep.equal(testUser);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ca813e5-a52a-41b6-9323-635ac03a121c&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete a user from the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should delete a user from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\ntestDB.put(testUser);\nconst result = testDB.deleteUser(testUser.key);\nexpect(result).to.exist;\nexpect(result).to.deep.equal(testUser);\nconst retrievedUser = testDB.getUser(testUser.key);\nexpect(retrievedUser).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8844aed5-9ae1-4db8-82aa-97bb27003a5c&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw an error when trying to delete non-existent user&quot;,&quot;fullTitle&quot;:&quot;Database Tests should throw an error when trying to delete non-existent user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = generateRandomUser();\nexpect(() =&gt; testDB.deleteUser(testUser.key)).to.throw(&#x27;Item not found in database.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87fe98b5-d151-4d2e-9199-3cc8e4257477&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a valid feed into the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should insert a valid feed into the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TODO&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63b224fd-ff77-4934-9489-20362d3ee554&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a valid feed from the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should get a valid feed from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TODO&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4d20656-796e-42c8-9355-39c79423987a&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a valid user profile into the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should insert a valid user profile into the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TODO&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b32091a-5749-4560-8946-92e44f7cfa53&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a valid user profile from the database&quot;,&quot;fullTitle&quot;:&quot;Database Tests should get a valid user profile from the database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TODO&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54908508-9dc5-4465-88af-389ca7d5b173&quot;,&quot;parentUUID&quot;:&quot;ae18f0e5-95d1-4a88-98de-2e169b9b02b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b34031e5-1a65-406d-adaf-4d463567d693&quot;,&quot;87d69469-5d88-4203-a692-7d240f09140b&quot;,&quot;0da74d71-cdd4-4bf3-b5cd-fe0442045f22&quot;,&quot;08c4a676-d3bd-4591-9a41-ca63d116e203&quot;,&quot;f4005e6d-12c1-4ef9-aa77-6062eb2ddb55&quot;,&quot;55e4acc5-51b1-4b2b-a820-243b3004424e&quot;,&quot;b8e36466-3722-4552-b9a3-1e34b426c14f&quot;,&quot;bcd95aed-6a56-4cdd-86b2-3c17653bff37&quot;,&quot;7e5162d0-cf48-4d0c-a061-23cc974f44c2&quot;,&quot;b6d1eafd-8137-4441-82d2-3a94c43e7782&quot;,&quot;db9c7e78-0a69-47af-a04d-fb3200bd37bb&quot;,&quot;b54b0127-f691-45d7-89b7-0d10e2ea60a1&quot;,&quot;fd4d42a1-af5d-430a-b6fa-cff6f9d1ad50&quot;,&quot;c2867269-9b56-4454-a5e7-3cbbe95dbe68&quot;,&quot;7617b147-cb6c-474d-a4ca-8778b53f7dd7&quot;,&quot;1899ff59-49ec-4844-8039-213f13cc1f3c&quot;,&quot;144e35b6-486c-4024-bd96-8b48312cd06c&quot;,&quot;001c1cf8-7676-4bfd-a819-b1405c69d34d&quot;,&quot;7ca813e5-a52a-41b6-9323-635ac03a121c&quot;,&quot;8844aed5-9ae1-4db8-82aa-97bb27003a5c&quot;,&quot;87fe98b5-d151-4d2e-9199-3cc8e4257477&quot;,&quot;63b224fd-ff77-4934-9489-20362d3ee554&quot;,&quot;e4d20656-796e-42c8-9355-39c79423987a&quot;,&quot;1b32091a-5749-4560-8946-92e44f7cfa53&quot;,&quot;54908508-9dc5-4465-88af-389ca7d5b173&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:302,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;64224b76-e449-4b41-971e-e5c191bde49d&quot;,&quot;title&quot;:&quot;DHT Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/dht.test.js&quot;,&quot;file&quot;:&quot;/tests/dht.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;DHT Tests \&quot;before all\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1510,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(5000);\n// Code to run before all tests in this test suite\n// Check if dht is already running\n// Create a bootstrap node\ncreateDHTBootstrap();\n// Create an empty test database\n// testDB = new Database(&#x27;./tests/data/test_database.db&#x27;);\ntestDB = new Database(&#x27;:memory:&#x27;);\nDHT.setDb(testDB);\nexpect(testDB).to.be.an.instanceof(Database);\nsetTimeout(() =&gt; {\n  // Shut down the dht test node\n  done();\n}, 1500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95da2a05-5aea-4738-a3cc-cb99dfcf25e8&quot;,&quot;parentUUID&quot;:&quot;64224b76-e449-4b41-971e-e5c191bde49d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;DHT Tests \&quot;before each\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ffbf3a53-fbf6-464f-845d-ef362c2885d9&quot;,&quot;parentUUID&quot;:&quot;64224b76-e449-4b41-971e-e5c191bde49d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;DHT Tests \&quot;after all\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Destroy the bootstrap node\ndestroyDHTBootstrap();\n// Shut down the dht test node\nDHT.shutdownDHT();\n// Close the database connection\nif (testDB) {\n  testDB.closeDatabaseConnection();\n}\n// Delete the test database file, if it exists\nif (fs.existsSync(&#x27;./tests/data/test_database.db&#x27;)) {\n  fs.unlinkSync(&#x27;./tests/data/test_database.db&#x27;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7bcf9d9-a4b2-4628-9f61-711e763c756d&quot;,&quot;parentUUID&quot;:&quot;64224b76-e449-4b41-971e-e5c191bde49d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;DHT Tests \&quot;after each\&quot; hook in \&quot;DHT Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65257887-e931-4b3d-9556-7ef31c2ba83a&quot;,&quot;parentUUID&quot;:&quot;64224b76-e449-4b41-971e-e5c191bde49d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set up a dht node&quot;,&quot;fullTitle&quot;:&quot;DHT Tests should set up a dht node&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;node = DHT.initDHTNode();\nexpect(node).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03ce403e-0982-439a-8b68-43e41d45fc7e&quot;,&quot;parentUUID&quot;:&quot;64224b76-e449-4b41-971e-e5c191bde49d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail a query for non exising document&quot;,&quot;fullTitle&quot;:&quot;DHT Tests should fail a query for non exising document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4008,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\nconst doc = generateRandomDocument();\nconst response = await DHT.queryDHT(doc.key, Types.Document);\nexpect(response).to.exist;\nexpect(response.responseType).to.equal(ResponseTypes.Error);\nexpect(response.responseData).to.equal(&#x27;Item not found in DHT.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2597b52d-de99-418a-9339-1a432cbbdbf4&quot;,&quot;parentUUID&quot;:&quot;64224b76-e449-4b41-971e-e5c191bde49d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should put a document in the dht&quot;,&quot;fullTitle&quot;:&quot;DHT Tests should put a document in the dht&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\nconst doc = generateRandomDocument();\nconst response = await DHT.storeDHT(doc.key, doc);\nexpect(response).to.exist;\nexpect(response.key).to.equal(doc.key);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;496621c1-1f3d-4037-8cc6-a69ba7316d7d&quot;,&quot;parentUUID&quot;:&quot;64224b76-e449-4b41-971e-e5c191bde49d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to put a document in the dht&quot;,&quot;fullTitle&quot;:&quot;DHT Tests should fail to put a document in the dht&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\nconst doc = generateRandomDocument();\ndoc.key = &#x27;invalid key&#x27;;\nconst response = await DHT.storeDHT(doc.key, doc);\nexpect(response).to.exist;\nexpect(response.responseType).to.equal(ResponseTypes.Error);\nexpect(response.responseData).to.equal(&#x27;Invalid key.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8628d87b-50b3-43ff-96f5-b5bf44d51511&quot;,&quot;parentUUID&quot;:&quot;64224b76-e449-4b41-971e-e5c191bde49d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query for an existing document&quot;,&quot;fullTitle&quot;:&quot;DHT Tests should query for an existing document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\nconst doc = generateRandomDocument();\nconst put = await DHT.storeDHT(doc.key, doc);\nexpect(put).to.exist;\nexpect(put.key).to.equal(doc.key);\nconst response = await DHT.queryDHT(put.key, put.type);\nexpect(response).to.exist;\nexpect(response.responseType).to.equal(ResponseTypes.Success);\nexpect(response.responseData).to.deep.equal(doc);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbaec46b-7238-4dea-909d-5e4c2607e735&quot;,&quot;parentUUID&quot;:&quot;64224b76-e449-4b41-971e-e5c191bde49d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should put a lot of documents in the dht&quot;,&quot;fullTitle&quot;:&quot;DHT Tests should put a lot of documents in the dht&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1981,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\nconst amount = 20;\n// generate documents\nconst docs = [];\nfor (let i = 0; i &lt; amount; i += 1) {\n  docs.push(generateRandomDocument());\n}\n// create 100 promises\nconst promises = [];\ndocs.forEach((doc) =&gt; {\n  promises.push(DHT.storeDHT(doc.key, doc));\n});\n// wait for all promises to resolve\nconst responses = await Promise.all(promises);\n// check that all responses are valid\nresponses.forEach((response) =&gt; {\n  expect(response).to.exist;\n  expect(response.key).to.exist;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0d162cc-3a6a-4c5b-9a7f-85a6e1375db7&quot;,&quot;parentUUID&quot;:&quot;64224b76-e449-4b41-971e-e5c191bde49d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;03ce403e-0982-439a-8b68-43e41d45fc7e&quot;,&quot;2597b52d-de99-418a-9339-1a432cbbdbf4&quot;,&quot;496621c1-1f3d-4037-8cc6-a69ba7316d7d&quot;,&quot;8628d87b-50b3-43ff-96f5-b5bf44d51511&quot;,&quot;fbaec46b-7238-4dea-909d-5e4c2607e735&quot;,&quot;e0d162cc-3a6a-4c5b-9a7f-85a6e1375db7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6009,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;30195fed-fa47-44c8-aaea-f2537fd03e3b&quot;,&quot;title&quot;:&quot;UI Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/ui.term.test.js&quot;,&quot;file&quot;:&quot;/tests/ui.term.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new Terminal UI instance&quot;,&quot;fullTitle&quot;:&quot;UI Tests should create a new Terminal UI instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TODO&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a33712a7-b1a3-47b0-917c-5ae591015039&quot;,&quot;parentUUID&quot;:&quot;30195fed-fa47-44c8-aaea-f2537fd03e3b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a33712a7-b1a3-47b0-917c-5ae591015039&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4b7ff423-a7ea-4473-84d0-0373af4b8b0d&quot;,&quot;title&quot;:&quot;Document Generation Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/utils.test.js&quot;,&quot;file&quot;:&quot;/tests/utils.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should generate a valid document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate a valid document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\nexpect(doc).to.be.an(&#x27;object&#x27;);\nexpect(doc.type).to.equal(&#x27;document&#x27;);\nexpect(doc.key).to.be.a(&#x27;string&#x27;);\nexpect(doc.owner).to.be.a(&#x27;string&#x27;);\nexpect(doc.owner).to.match(keyRegex);\nexpect(doc.timestamp).to.be.a(&#x27;string&#x27;);\nexpect(doc.title).to.be.a(&#x27;string&#x27;);\nexpect(doc.title).to.have.lengthOf.at.least(5);\nexpect(doc.title).to.have.lengthOf.at.most(50);\nexpect(doc.content).to.be.a(&#x27;string&#x27;);\nexpect(doc.content).to.have.lengthOf.at.least(5);\nexpect(doc.content).to.have.lengthOf.at.most(2000);\nexpect(doc.tags).to.be.an(&#x27;array&#x27;);\nexpect(doc.tags).to.have.lengthOf.at.least(0);\nexpect(doc.tags).to.have.lengthOf.at.most(5);\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47980db1-a9e4-4d4e-b741-d5c43cbcbd5a&quot;,&quot;parentUUID&quot;:&quot;4b7ff423-a7ea-4473-84d0-0373af4b8b0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a unique document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate a unique document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc1 = generateRandomDocument();\nconst doc2 = generateRandomDocument();\nexpect(doc1).to.not.deep.equal(doc2);\nexpect(doc1.key).to.not.equal(doc2.key);\nexpect(doc1.owner).to.not.equal(doc2.owner);\nexpect(doc1.timestamp).to.not.equal(doc2.timestamp);\nexpect(doc1.title).to.not.equal(doc2.title);\n/* etc */&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;738f096c-6658-4229-941c-8e61b02746f2&quot;,&quot;parentUUID&quot;:&quot;4b7ff423-a7ea-4473-84d0-0373af4b8b0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a valid hash from document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate a valid hash from document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\n// const key = doc.key;\nexpect(isValidKeyFormat(doc.key)).to.be.true;\nexpect(isValidKeyForItem(doc.key, doc)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b932f718-9cc4-49c4-bffe-18c79e1a22c0&quot;,&quot;parentUUID&quot;:&quot;4b7ff423-a7ea-4473-84d0-0373af4b8b0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate an invalid document hash&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should not validate an invalid document hash&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc1 = generateRandomDocument();\nconst doc2 = generateRandomDocument();\n// const key = doc1.id;\nexpect(isValidKeyForItem(doc1.key, doc1)).to.be.true;\nexpect(isValidKeyForItem(doc1.key, doc2)).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36cf10ff-51ff-427f-ad94-d278c7dc7900&quot;,&quot;parentUUID&quot;:&quot;4b7ff423-a7ea-4473-84d0-0373af4b8b0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept the wrong key for document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should not accept the wrong key for document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\nconst key = &#x27;123456789ABCDEF&#x27;;\nexpect(isValidKeyForItem(key, doc)).to.be.false;\nexpect(isValidKeyFormat(key)).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;015a03c4-1fa7-4e04-915b-467564598077&quot;,&quot;parentUUID&quot;:&quot;4b7ff423-a7ea-4473-84d0-0373af4b8b0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a consistent hash for same document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate a consistent hash for same document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\n// We are hashing a generated doc so the key will not match the id\n// But key1 and key2 should be the same\nconst key1 = generateKey(doc);\nconst key2 = generateKey(doc);\nexpect(key1).to.equal(key2);\nexpect(key1).to.not.equal(key1.id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a260eb21-52df-4a76-a37d-a7fbce1b80b6&quot;,&quot;parentUUID&quot;:&quot;4b7ff423-a7ea-4473-84d0-0373af4b8b0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a different hash for different document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate a different hash for different document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc1 = generateRandomDocument();\nconst doc2 = generateRandomDocument();\nconst key1 = generateKey(doc1);\nconst key2 = generateKey(doc2);\nexpect(key1).to.not.equal(key2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef701c5a-2962-4c70-959d-0a4494364c99&quot;,&quot;parentUUID&quot;:&quot;4b7ff423-a7ea-4473-84d0-0373af4b8b0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate the same hash for different document with same data&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate the same hash for different document with same data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc1 = generateRandomDocument();\nconst doc2 = { ...doc1 };\nconst key1 = generateKey(doc1);\nconst key2 = generateKey(doc2);\nexpect(key1).to.equal(key2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08925435-e176-4cfb-b8c7-b87c8caacde4&quot;,&quot;parentUUID&quot;:&quot;4b7ff423-a7ea-4473-84d0-0373af4b8b0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate the same hash for same object with different parameter order&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate the same hash for same object with different parameter order&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc1 = {\n  type: &#x27;document&#x27;,\n  id: &#x27;1234567890123456&#x27;,\n  owner: &#x27;1234567890123456&#x27;,\n  timestamp: &#x27;2021-03-01T00:00:00.000Z&#x27;,\n  title: &#x27;Lorem ipsum dolor sit amet&#x27;,\n  content: &#x27;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus. Sed sit amet ipsum mauris.&#x27;,\n  tags: [&#x27;lorem&#x27;, &#x27;ipsum&#x27;, &#x27;dolor&#x27;, &#x27;sit&#x27;, &#x27;amet&#x27;],\n  signature: null,\n};\nconst doc2 = {\n  id: &#x27;1234567890123456&#x27;,\n  type: &#x27;document&#x27;,\n  owner: &#x27;1234567890123456&#x27;,\n  timestamp: &#x27;2021-03-01T00:00:00.000Z&#x27;,\n  content: &#x27;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus. Sed sit amet ipsum mauris.&#x27;,\n  tags: [&#x27;lorem&#x27;, &#x27;ipsum&#x27;, &#x27;dolor&#x27;, &#x27;sit&#x27;, &#x27;amet&#x27;],\n  title: &#x27;Lorem ipsum dolor sit amet&#x27;,\n  signature: null,\n};\nexpect(doc1).to.deep.equal(doc2);\n// Need to test that the order of keys doesn&#x27;t effect the hash function\n// Otherwise it will be inconsistent for the same object\nexpect(JSON.stringify(doc1)).to.not.equal(JSON.stringify(doc2));\nexpect(generateKey(JSON.stringify(doc1))).to.not.equal(JSON.stringify(doc2));\nconst key1 = generateKey(doc1);\nconst key2 = generateKey(doc2);\nexpect(key1).to.equal(key2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9237735-7be5-46ce-96b4-94dd6383eaa1&quot;,&quot;parentUUID&quot;:&quot;4b7ff423-a7ea-4473-84d0-0373af4b8b0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a valid key for a document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate a valid key for a document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const providedKey = &#x27;MiRm77ENUCNp0bk40w6l+vJfZbtM14fRX/OxPqshzHA=&#x27;;\nconst document = {\n  type: &#x27;document&#x27;,\n  owner: &#x27;KsTEdLZFJn8tGeromEycmr+rhf9Ed0psqCjK9efbpBo=&#x27;,\n  timestamp: &#x27;2023-08-25T12:24:29.154Z&#x27;,\n  title: &#x27;Title2&#x27;,\n  content: &#x27;Post2&#x27;,\n  key: &#x27;MiRm77ENUCNp0bk40w6l+vJfZbtM14fRX/OxPqshzHA=&#x27;,\n  signature: &#x27;pDnGNmkmJg9AV9D2NGvtjD2nLrdX9oiAQFtWhQfRE5BSvfcXq2iGSWb5lVgdTnGR306Z9BHd+jLvDvIvzFVOAg==&#x27;,\n  tags: undefined,\n};\nconst { key, signature, ...content } = document;\n// console.log(key, signature, content);\n// console.log(generateKey(content));\n// content.tags = [];\n// console.log(generateKey(content));\nexpect(key).to.equal(providedKey);\nexpect(generateKey(content)).to.equal(providedKey);\nexpect(isValidKeyFormat(key)).to.be.true;\nexpect(isValidKeyForItem(key, document)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e9f1629-d0db-4e69-b5c0-8dc839dadff7&quot;,&quot;parentUUID&quot;:&quot;4b7ff423-a7ea-4473-84d0-0373af4b8b0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a valid key for a document&quot;,&quot;fullTitle&quot;:&quot;Document Generation Tests should generate a valid key for a document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const document = {\n  type: &#x27;document&#x27;,\n  owner: generateKey(&#x27;random&#x27;),\n  timestamp: new Date().toISOString(),\n  title: &#x27;Title&#x27;,\n  content: &#x27;Post&#x27;,\n  tags: [],\n  // signature: null,\n};\ndocument.key = generateKey(document);\n// sign the new document\ndocument.signature = &#x27;12345&#x27;;\nconst { key, signature, ...content } = document;\n// console.log(key, signature, content);\nexpect(key).to.equal(generateKey(content));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba103e6d-4227-492b-92bd-5ffddea795c2&quot;,&quot;parentUUID&quot;:&quot;4b7ff423-a7ea-4473-84d0-0373af4b8b0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;47980db1-a9e4-4d4e-b741-d5c43cbcbd5a&quot;,&quot;738f096c-6658-4229-941c-8e61b02746f2&quot;,&quot;b932f718-9cc4-49c4-bffe-18c79e1a22c0&quot;,&quot;36cf10ff-51ff-427f-ad94-d278c7dc7900&quot;,&quot;015a03c4-1fa7-4e04-915b-467564598077&quot;,&quot;a260eb21-52df-4a76-a37d-a7fbce1b80b6&quot;,&quot;ef701c5a-2962-4c70-959d-0a4494364c99&quot;,&quot;08925435-e176-4cfb-b8c7-b87c8caacde4&quot;,&quot;b9237735-7be5-46ce-96b4-94dd6383eaa1&quot;,&quot;6e9f1629-d0db-4e69-b5c0-8dc839dadff7&quot;,&quot;ba103e6d-4227-492b-92bd-5ffddea795c2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9c634d1f-b373-4ee8-af59-df0a183996f1&quot;,&quot;title&quot;:&quot;Feed Generation Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/utils.test.js&quot;,&quot;file&quot;:&quot;/tests/utils.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should generate a random feed with valid parameters&quot;,&quot;fullTitle&quot;:&quot;Feed Generation Tests should generate a random feed with valid parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const feed = generateRandomFeed();\nexpect(feed).to.be.an(&#x27;object&#x27;);\nexpect(feed).to.have.property(&#x27;type&#x27;);\nexpect(feed.type).to.equal(&#x27;feed&#x27;);\nexpect(feed).to.have.property(&#x27;owner&#x27;);\nexpect(feed.owner).to.be.a(&#x27;string&#x27;);\nexpect(feed.owner).to.match(keyRegex);\nexpect(feed).to.have.property(&#x27;timestamp&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fef185b4-7e26-48d6-aa19-6f44db75003b&quot;,&quot;parentUUID&quot;:&quot;9c634d1f-b373-4ee8-af59-df0a183996f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fef185b4-7e26-48d6-aa19-6f44db75003b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5ac6374f-49a2-4ecc-8abe-809bf547dd2c&quot;,&quot;title&quot;:&quot;Key Generation / Validation Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/utils.test.js&quot;,&quot;file&quot;:&quot;/tests/utils.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should generate a valid key by hashing an object&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate a valid key by hashing an object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const object = {\n  type: &#x27;document&#x27;,\n  id: &#x27;1234567890123456&#x27;,\n  owner: &#x27;1234567890123456&#x27;,\n};\nconst key = generateKey(object);\nexpect(key).to.equal(&#x27;HOZB/B/8I3/2cWUtyae4nPv1vX7KjCZnOCV7iwrhJlI=&#x27;);\nexpect(key).to.be.a(&#x27;string&#x27;);\nexpect(key).to.have.lengthOf(44);\nexpect(key).to.match(keyRegex);\n// const { error } = keyRegex.validate(key);\n// expect(error).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a497a9b-9375-4e90-b459-202200073d17&quot;,&quot;parentUUID&quot;:&quot;5ac6374f-49a2-4ecc-8abe-809bf547dd2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should validate a valid key format&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should validate a valid key format&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Generate a collection of random valid keys\nconst validKeys = [];\nfor (let i = 0; i &lt; 10; i += 1) {\n  validKeys[i] = generateKey(generateRandomDocument());\n}\nvalidKeys.forEach((key) =&gt; {\n  expect(key).to.be.a(&#x27;string&#x27;);\n  expect(key).to.have.lengthOf(44);\n  expect(key).to.match(keyRegex);\n  expect(isValidKeyFormat(key)).to.be.true;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b9580b0-218a-44e8-b197-c19fe7c8ca1b&quot;,&quot;parentUUID&quot;:&quot;5ac6374f-49a2-4ecc-8abe-809bf547dd2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate an invalid key format&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should not validate an invalid key format&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const invalidKeys = [\n  &#x27;invalid&#x27;,\n  &#x27;12345&#x27;,\n  12345,\n  { key: &#x27;1ud321KDwz6ZFuK9gi0lrr4tIt0TFXR4TR5VCJcukeE=&#x27; },\n  // &#x27;1ud321KDwz6ZFuK9gi0lrr4tIt0TFXR4TR5VCJcuke&#x27;,\n  // &#x27;1ud321KDwz6ZFuK9gi0lrr4tIt0TFXR4TR5VCJcukeeee&#x27;,\n];\ninvalidKeys.forEach((key) =&gt; {\n  expect(isValidKeyFormat(key)).to.be.false;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e35d769-57d7-44ca-89c8-b45da74d829c&quot;,&quot;parentUUID&quot;:&quot;5ac6374f-49a2-4ecc-8abe-809bf547dd2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should validate a valid key for an item&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should validate a valid key for an item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f256dd72-7c8f-4d55-b909-b0466141422d&quot;,&quot;parentUUID&quot;:&quot;5ac6374f-49a2-4ecc-8abe-809bf547dd2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate an invalid key for an item&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should not validate an invalid key for an item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a83ffa35-4b72-4364-85f3-b4eb32bdc4ea&quot;,&quot;parentUUID&quot;:&quot;5ac6374f-49a2-4ecc-8abe-809bf547dd2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a consistent key for the same data&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate a consistent key for the same data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a3ef844-2da3-42e1-9d5f-6950b693c8c8&quot;,&quot;parentUUID&quot;:&quot;5ac6374f-49a2-4ecc-8abe-809bf547dd2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a different key for different data&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate a different key for different data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8daeb224-3565-424e-a27d-bf49285f48fa&quot;,&quot;parentUUID&quot;:&quot;5ac6374f-49a2-4ecc-8abe-809bf547dd2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate the same key for different object with same data&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate the same key for different object with same data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ae87caa-f4c5-4481-82a6-b8d80a131f71&quot;,&quot;parentUUID&quot;:&quot;5ac6374f-49a2-4ecc-8abe-809bf547dd2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate the same key for same object with different parameter order&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate the same key for same object with different parameter order&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ae6187a-fbac-402d-9136-1b8031b32fba&quot;,&quot;parentUUID&quot;:&quot;5ac6374f-49a2-4ecc-8abe-809bf547dd2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a valid key for a document&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate a valid key for a document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b834b664-e272-415c-bcc6-30d7642feec3&quot;,&quot;parentUUID&quot;:&quot;5ac6374f-49a2-4ecc-8abe-809bf547dd2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a valid key for a user&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate a valid key for a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;835be354-d6cf-48b5-9923-03c944473bb5&quot;,&quot;parentUUID&quot;:&quot;5ac6374f-49a2-4ecc-8abe-809bf547dd2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should generate a valid key for a feed&quot;,&quot;fullTitle&quot;:&quot;Key Generation / Validation Tests should generate a valid key for a feed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd44805b-87fd-4f88-85bf-d21d4de3ad73&quot;,&quot;parentUUID&quot;:&quot;5ac6374f-49a2-4ecc-8abe-809bf547dd2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9a497a9b-9375-4e90-b459-202200073d17&quot;,&quot;3b9580b0-218a-44e8-b197-c19fe7c8ca1b&quot;,&quot;2e35d769-57d7-44ca-89c8-b45da74d829c&quot;,&quot;f256dd72-7c8f-4d55-b909-b0466141422d&quot;,&quot;a83ffa35-4b72-4364-85f3-b4eb32bdc4ea&quot;,&quot;4a3ef844-2da3-42e1-9d5f-6950b693c8c8&quot;,&quot;8daeb224-3565-424e-a27d-bf49285f48fa&quot;,&quot;2ae87caa-f4c5-4481-82a6-b8d80a131f71&quot;,&quot;9ae6187a-fbac-402d-9136-1b8031b32fba&quot;,&quot;b834b664-e272-415c-bcc6-30d7642feec3&quot;,&quot;835be354-d6cf-48b5-9923-03c944473bb5&quot;,&quot;bd44805b-87fd-4f88-85bf-d21d4de3ad73&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;88e84d04-6449-41b5-9962-d0e625afc58e&quot;,&quot;title&quot;:&quot;Document Validation Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/validation.document.test.js&quot;,&quot;file&quot;:&quot;/tests/validation.document.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should validate a valid document&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should validate a valid document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3561c883-58f3-40e3-b718-3d551876c801&quot;,&quot;parentUUID&quot;:&quot;88e84d04-6449-41b5-9962-d0e625afc58e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with an invalid type&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with an invalid type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.type = &#x27;invalid&#x27;;\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f3ef16b-6e51-4461-a224-f3b096f88d7d&quot;,&quot;parentUUID&quot;:&quot;88e84d04-6449-41b5-9962-d0e625afc58e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with an invalid id&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with an invalid id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.id = &#x27;invalid&#x27;;\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41c1c3f1-5ccb-44de-9933-707811adf933&quot;,&quot;parentUUID&quot;:&quot;88e84d04-6449-41b5-9962-d0e625afc58e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with an invalid owner&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with an invalid owner&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.owner = &#x27;invalid&#x27;;\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3352d85b-d343-4a0e-bb31-29f46206b192&quot;,&quot;parentUUID&quot;:&quot;88e84d04-6449-41b5-9962-d0e625afc58e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with an invalid timestamp&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with an invalid timestamp&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.timestamp = &#x27;invalid&#x27;;\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1d6def1-2dd4-477b-9ea1-ea46bf62989e&quot;,&quot;parentUUID&quot;:&quot;88e84d04-6449-41b5-9962-d0e625afc58e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with an invalid title&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with an invalid title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.title = 123;\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8562f6d-f91b-4b31-b4e3-7c58d9f71d13&quot;,&quot;parentUUID&quot;:&quot;88e84d04-6449-41b5-9962-d0e625afc58e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with an invalid content (int)&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with an invalid content (int)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.content = 123;\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bd74c72-80cd-45bd-a6a7-472e04173b3f&quot;,&quot;parentUUID&quot;:&quot;88e84d04-6449-41b5-9962-d0e625afc58e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with invalid tags (int)&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with invalid tags (int)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.tags = 123;\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;875242ba-0af9-4eba-b55d-4620e818dbd7&quot;,&quot;parentUUID&quot;:&quot;88e84d04-6449-41b5-9962-d0e625afc58e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with invalid tags (int in array)&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with invalid tags (int in array)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.tags = [123];\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16026e1a-ae0d-4966-af0f-040086a02448&quot;,&quot;parentUUID&quot;:&quot;88e84d04-6449-41b5-9962-d0e625afc58e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with invalid tags (object in array)&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with invalid tags (object in array)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.tags = [{ invalid: true }];\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77d666a8-8022-4aa5-9668-9ed34714bead&quot;,&quot;parentUUID&quot;:&quot;88e84d04-6449-41b5-9962-d0e625afc58e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a document with invalid tags (mixed types)&quot;,&quot;fullTitle&quot;:&quot;Document Validation Tests should not validate a document with invalid tags (mixed types)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = generateRandomDocument();\ndoc.tags = [&#x27;invalid&#x27;, 123];\nconst { error } = documentSchema.validate(doc);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80eec8bf-a201-4fbe-8daf-48f4f7d463c8&quot;,&quot;parentUUID&quot;:&quot;88e84d04-6449-41b5-9962-d0e625afc58e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3561c883-58f3-40e3-b718-3d551876c801&quot;,&quot;9f3ef16b-6e51-4461-a224-f3b096f88d7d&quot;,&quot;41c1c3f1-5ccb-44de-9933-707811adf933&quot;,&quot;3352d85b-d343-4a0e-bb31-29f46206b192&quot;,&quot;e1d6def1-2dd4-477b-9ea1-ea46bf62989e&quot;,&quot;c8562f6d-f91b-4b31-b4e3-7c58d9f71d13&quot;,&quot;5bd74c72-80cd-45bd-a6a7-472e04173b3f&quot;,&quot;875242ba-0af9-4eba-b55d-4620e818dbd7&quot;,&quot;16026e1a-ae0d-4966-af0f-040086a02448&quot;,&quot;77d666a8-8022-4aa5-9668-9ed34714bead&quot;,&quot;80eec8bf-a201-4fbe-8daf-48f4f7d463c8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9d3a9305-6033-43d1-9c88-c57a6713bc9b&quot;,&quot;title&quot;:&quot;Feed Validation Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/validation.feed.test.js&quot;,&quot;file&quot;:&quot;/tests/validation.feed.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should validate a valid feed&quot;,&quot;fullTitle&quot;:&quot;Feed Validation Tests should validate a valid feed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const feed = generateRandomFeed(); // Function tested in utils tests\nconst { error } = feedSchema.validate(feed);\nexpect(error).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c17c329-670f-48e6-939c-69c3c2891616&quot;,&quot;parentUUID&quot;:&quot;9d3a9305-6033-43d1-9c88-c57a6713bc9b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6c17c329-670f-48e6-939c-69c3c2891616&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b4c2ea48-c629-4a42-aa3e-e5bdd52ab7ef&quot;,&quot;title&quot;:&quot;User Validation Tests&quot;,&quot;fullFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/tests/validation.user.test.js&quot;,&quot;file&quot;:&quot;/tests/validation.user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should validate a valid user with all fields correct&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should validate a valid user with all fields correct&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\nconst { error } = userSchema.validate(user);\nexpect(error).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a740b7ab-326e-49d2-941f-7a71d3e346b9&quot;,&quot;parentUUID&quot;:&quot;b4c2ea48-c629-4a42-aa3e-e5bdd52ab7ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should validate a valid user with \&quot;optional\&quot; fields null&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should validate a valid user with \&quot;optional\&quot; fields null&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\nuser.lastAddress = null;\nuser.lastSeen = null;\nuser.nickname = null;\nconst { error } = userSchema.validate(user);\nexpect(error).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25b9d7ce-d981-4035-9d2f-2c2194c9e2e5&quot;,&quot;parentUUID&quot;:&quot;b4c2ea48-c629-4a42-aa3e-e5bdd52ab7ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a valid user with empty \&quot;optional\&quot; parameters&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should not validate a valid user with empty \&quot;optional\&quot; parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\nconst invalidUser = {\n  type: user.type,\n  publicKey: user.publicKey,\n  nickname: &#x27;&#x27;,\n  lastSeen: &#x27;&#x27;,\n  lastFeed: &#x27;&#x27;,\n};\nconst { error } = userSchema.validate(invalidUser);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2385f9ab-bc8b-4aa2-9bec-2ef12dba84c7&quot;,&quot;parentUUID&quot;:&quot;b4c2ea48-c629-4a42-aa3e-e5bdd52ab7ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a valid user with parameters not defined&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should not validate a valid user with parameters not defined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\n// for each key in the user object, delete it and test validation\nObject.keys(user).forEach((key) =&gt; {\n  const invalidUser = { ...user };\n  delete invalidUser[key];\n  const { error } = userSchema.validate(invalidUser);\n  expect(error).to.not.be.undefined;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7c9e7d1-ceee-4a2e-8e2b-6167e38ebeb9&quot;,&quot;parentUUID&quot;:&quot;b4c2ea48-c629-4a42-aa3e-e5bdd52ab7ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a user with an invalid type&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should not validate a user with an invalid type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\nuser.type = &#x27;invalid&#x27;;\nconst { error } = userSchema.validate(user);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d05d75d3-1458-406c-9ffb-b570d7f2d00f&quot;,&quot;parentUUID&quot;:&quot;b4c2ea48-c629-4a42-aa3e-e5bdd52ab7ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a user with an invalid public key&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should not validate a user with an invalid public key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\nuser.publicKey = &#x27;invalid&#x27;;\nconst { error } = userSchema.validate(user);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83b5ca6a-55f3-4cd5-8ba0-f24807e6cad0&quot;,&quot;parentUUID&quot;:&quot;b4c2ea48-c629-4a42-aa3e-e5bdd52ab7ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a user with an invalid public key&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should not validate a user with an invalid public key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\nuser.publicKey = 123;\nconst { error } = userSchema.validate(user);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0bd4428d-2418-45b9-b229-2cd691c1e936&quot;,&quot;parentUUID&quot;:&quot;b4c2ea48-c629-4a42-aa3e-e5bdd52ab7ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not validate a user with an invalid nickname&quot;,&quot;fullTitle&quot;:&quot;User Validation Tests should not validate a user with an invalid nickname&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = generateRandomUser();\nuser.nickname = 1;\nconst { error } = userSchema.validate(user);\nexpect(error).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc23b2e1-ba30-46f6-85d7-2a810692cb66&quot;,&quot;parentUUID&quot;:&quot;b4c2ea48-c629-4a42-aa3e-e5bdd52ab7ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a740b7ab-326e-49d2-941f-7a71d3e346b9&quot;,&quot;25b9d7ce-d981-4035-9d2f-2c2194c9e2e5&quot;,&quot;2385f9ab-bc8b-4aa2-9bec-2ef12dba84c7&quot;,&quot;b7c9e7d1-ceee-4a2e-8e2b-6167e38ebeb9&quot;,&quot;d05d75d3-1458-406c-9ffb-b570d7f2d00f&quot;,&quot;83b5ca6a-55f3-4cd5-8ba0-f24807e6cad0&quot;,&quot;0bd4428d-2418-45b9-b229-2cd691c1e936&quot;,&quot;fc23b2e1-ba30-46f6-85d7-2a810692cb66&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:29,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;psddn&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/tolm/Development/CSM500 Project/psddn/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>